{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"C2SIM-SERVER","text":"<p>This project provides the reference implementation of the C2SIM Server, acting as a central distribution hub for interoperable Command and Control (C2), simulation, and robotic/autonomous systems.</p> <p>The server is based on the SISO C2SIM standards:</p> <ul> <li> <p>SISO-STD-019-2020 defines standardized interoperability between C2 systems, simulation systems, and robotic/autonomous systems (RAS).</p> </li> <li> <p>SISO-STD-020-2020 extends the core standard with land warfare\u2013specific concepts and data models.</p> </li> </ul> <p>The C2SIM Server enables multiple heterogeneous systems to exchange initialization data, orders, requests, and reports through a common semantic and messaging framework, reducing the need for point-to-point integrations.</p> <p>This implementation is the successor to the GMU C2SIM Server, continuing and modernizing the reference architecture originally developed by George Mason University.</p>"},{"location":"#siso-standards","title":"SISO Standards","text":"Standard Name SISO-STD-019-2020 Standard for Command and Control Systems - Simulation Systems Interoperation SISO-STD-020-2020 Standard for Land Operations Extension (LOX) to Command and Control Systems - Simulation Systems Interoperation"},{"location":"#siso-std-019-2020-c2-systems-simulation-systems-interoperation","title":"SISO-STD-019-2020: C2 Systems - Simulation Systems Interoperation","text":"<p>Defines a standardized model and data exchange format for information between Command and Control (C2) systems, simulation systems, and robotic/autonomous systems (RAS), especially in coalition military contexts.</p> <p>Key Definitions</p> <ul> <li> <p>Interoperability Focus: Enables structured initialization, tasking (orders/requests), and reporting data exchange among heterogeneous systems.</p> </li> <li> <p>Logical Data Model (LDM):</p> </li> <li> <p>Expressed as an ontology using the Web Ontology Language (OWL).</p> </li> <li> <p>Includes a core ontology and optional extensions for domain-specific content.</p> </li> </ul> <p>Core Capabilities Defined</p> <ul> <li> <p>Common Data Model: Shared classes and properties that represent operational and force information, orders, reports, and situational context.</p> </li> <li> <p>Message Structure and Exchange: Uses FIPA ACL-style messaging semantics over XML schemas derived from the ontologies.</p> </li> <li> <p>Extensibility: Through higher-level ontologies layered on the core LDM.</p> </li> </ul>"},{"location":"#siso-std-020-2020-land-operations-extension-lox","title":"SISO-STD-020-2020: Land Operations Extension (LOX)","text":"<p>Purpose &amp; Scope</p> <ul> <li> <p>Extends the C2SIM Core for land warfare operations, adding the specific data constructs required to represent plans, orders, and domain-specific entities used in land operations.</p> </li> <li> <p>Requires the C2SIM core and the Standard Military Extension (SMX) as prerequisites \u2014 LOX builds on them.</p> </li> </ul> <p>Key Features</p> <ul> <li> <p>Land Domain Ontology: Defines the additional classes and relationships relevant to surface forces and their operations (terrain, units, movements, etc.).</p> </li> <li> <p>Integration with Core: It is not standalone; the extension imports and references the core ontology and SMX.</p> </li> <li> <p>XML Schema Generation: Extensions can produce XML schemas from the ontologies for actual message/data exchange.</p> </li> </ul>"},{"location":"c2sim-client-java/","title":"JAVA C2SIM client","text":"<p>The module <code>c2sim-client</code> can be used to create a <code>C2SIM client</code>.</p> <p>The client handles:</p> <ul> <li> <p>Session Management: Join/resign from shared sessions with other systems</p> </li> <li> <p>Message Publishing: Send C2SIM XML documents with XSD validation</p> </li> <li> <p>Message Receiving: Stream C2SIM messages via WebSocket with optional validation/decoding</p> </li> <li> <p>State Synchronization: Track and respond to C2SIM server state changes</p> </li> <li> <p>OIDC Authentication: Secure connections with JWT tokens from OIDC providers</p> </li> <li> <p>Error Handling: Comprehensive exception handling and retry logic</p> </li> </ul> <p>See package c2sim-client documentation.</p> <p>*TODO - Create simple demo app, and update this documentation *</p>"},{"location":"c2sim-in-nutshell/","title":"C2SIM Specification \u2014 in a nutshell","text":""},{"location":"c2sim-in-nutshell/#purpose","title":"Purpose","text":"<p>The C2SIM standard standardizes interoperability between <code>Command and Control (C2) systems</code> and <code>simulation systems</code>.</p> <p>A key focus of the standard is the <code>exchange of C2SIM messages</code> between systems. The <code>C2SIM server</code> acts as a mediator, enabling systems to exchange information in a consistent and interoperable manner.</p>"},{"location":"c2sim-in-nutshell/#vision","title":"Vision","text":"<p>The MSG-211 Report describes the vision as follows:</p> <p>We are working toward a day when the members of a coalition interconnect their networks, command and control (C2) systems, and simulations simply by turning them on and authenticating, in a standards-based environment.</p> <p>The vision behind C2SIM is seamless interoperability within a coalition environment, where:</p> <ul> <li>Nations use their own C2 systems</li> <li>Systems interoperate using shared C2 standards</li> <li>National simulations interoperate using Modeling &amp; Simulation (M&amp;S) standards, such as:</li> <li>HLA (High Level Architecture)</li> <li>DIS (Distributed Interactive Simulation)</li> </ul> <p>The term \u201cCoalition\u201d reflects a higher level of integration than traditional federated simulation environments such as HLA. In C2SIM, interoperability occurs at the operational C2 level across a system of systems.</p>"},{"location":"c2sim-in-nutshell/#siso-standards","title":"SISO Standards","text":"<p>The SISO standards define the information must be exchanged at the system level between C2 and simulation systems.</p> <p>The C2SIM standard specifies the \u201cwhat\u201d, not the \u201chow\u201d (i.e., it does not prescribe specific transport mechanisms or system implementations).</p> Standard Name SISO-STD-019-2020 Standard for Command and Control Systems \u2013 Simulation Systems Interoperation SISO-STD-020-2020 Standard for Land Operations Extension (LOX) to C2SIM"},{"location":"c2sim-in-nutshell/#c2sim-ontology","title":"C2SIM Ontology","text":"<p>The C2SIM standard defines a data model that specifies the information to be shared across C2SIM systems to ensure interoperability.</p> <p>This data model is formally described in the <code>C2SIM Ontology</code>.</p> <p>The ontology is based on:</p> <ul> <li>Core Ontology with a Standard Military Extension (SMX)</li> <li>Extended by the Land Operations Extension (LOX)</li> </ul>"},{"location":"c2sim-in-nutshell/#technical-representation","title":"Technical Representation","text":"<p>The ontology is defined in <code>RDF/XML</code> format. An <code>XSLT transformation</code> converts the RDF/XML representation into an <code>XML Schema Definition (XSD)</code>. </p> <p>Between the C2SIM systems <code>XML</code> messages are exchanged.</p> <p>In this project the <code>XSD</code> is used for code generation and validation of XML messages.</p>"},{"location":"c2sim-server-architecture/","title":"C2SIM Server","text":""},{"location":"c2sim-server-architecture/#multi-module-structure","title":"Multi-Module Structure","text":"<p>The project is organized as a Maven multi-module build:</p>"},{"location":"c2sim-server-architecture/#build","title":"Build","text":"<p>The project uses maven build system. Install maven and execute in <code>.\\server</code>:</p> <pre><code>mvn clean package\n</code></pre>"},{"location":"c2sim-server-architecture/#docker","title":"Docker","text":"<p>In the folder <code>server\\c2sim-server\\docker</code>:</p> <pre><code>docker compose build\n</code></pre>"},{"location":"c2sim-server-architecture/#frameworks","title":"Frameworks","text":"<ul> <li> <p>Javalin</p> </li> <li> <p>Logback</p> </li> </ul>"},{"location":"c2sim-server-architecture/#open-api","title":"Open API","text":"<p>This project uses spec first approach. The server API interface is generated based on the OpenAPI spec.</p>"},{"location":"c2sim-server-architecture/#_1","title":"C2SIM Server","text":""},{"location":"c2sim-test-client-app/","title":"C2SIM example application","text":"<p>The\u00a0C2SIM Client App\u00a0is a test/demo application that demonstrates how to use the C2SIM Java client library to interact with the C2SIM server.</p> <p>The application can be found in</p> <pre><code>server\\c2sim-client-app\n</code></pre> <p>The application is used for:</p> <ul> <li> <p>Stress testing (multiple <code>C2SIM clients</code> )</p> </li> <li> <p>Testing <code>authorization</code></p> </li> <li> <p>Testing serialization and deserialization <code>C2SIM messages</code></p> </li> <li> <p>Testing validation of <code>C2SIM messages</code></p> </li> <li> <p>Testing <code>C2SIM orchestration</code> with multiple <code>C2SIM clients</code></p> </li> </ul> <p>What demonstrates the application:</p> <ol> <li>OIDC Authentication: </li> </ol> <p>Authenticates with a Keycloak server using the OIDC client credentials flow to obtain JWT tokens with C2SIM-specific claims.</p> <ol> <li>Client Session Management: </li> </ol> <p>Creates one or more\u00a0MonitorClient\u00a0instances that each:</p> <ul> <li>Connect to the C2SIM server at\u00a0<code>http://localhost:7777/api</code></li> <li>Join a shared session named \"default\"</li> <li> <p>Represent distinct systems in the simulation (e.g., SYSTEM_0, SYSTEM_1, etc.)</p> </li> <li> <p>Server State Orchestration:</p> </li> <li> <p>Waits for all clients to connect and establish WebSocket streams</p> </li> <li>Brings the C2SIM server into the RUNNING state by sending initialization triggers (SUBMIT_INITIALIZATION, SHARE_SCENARIO, START_SCENARIO)</li> <li> <p>Monitors state changes across all connected clients</p> </li> <li> <p>Message Publishing: </p> </li> </ul> <p>Each\u00a0MonitorClient\u00a0runs in its own virtual thread and periodically publishes C2SIM XML reports containing position/tracking updates every 5 seconds (once the server enters RUNNING state).</p>"},{"location":"documentation/","title":"Documentation","text":""},{"location":"documentation/#mkdocs-documentation","title":"MKDOCS Documentation","text":"<p>The documentation website is generated with mkdocs . The table of content is described in <code>/mkdocs.yml</code>. </p> <p>Build documentation:</p> <ul> <li> <p>Manual build with <code>c2sim-server\\docs\\generate-mkdocs.bat</code> to view on local machine.</p> </li> <li> <p>Automatic build with GitHub action <code>.github\\workflows\\deploy.yml</code> on commit to GitHub.</p> </li> <li> <p>Documentation is automatic build  in docker image</p> </li> </ul> <p>View documentation</p> Deployment How to show documentation website Online https://tno-mst.github.io/c2sim-server/ Local Run <code>generate-mkdocs.bat</code>; builds documentation and view documentation on local webserver on <code>http://127.0.0.1:1234/TNO-MST/c2sim-server/</code> Docker When the <code>C2SIM-SERVER</code>\u00a0is started in docker container, the documentation is automatically hosted by the C2SIM server."},{"location":"documentation/#java-doc","title":"Java doc","text":"<p>The project includes javadoc.</p> <pre><code>mvn javadoc:javadoc\n</code></pre> <p>To generate a <code>HTML</code> documentation website for all modules:</p> <pre><code>mvn javadoc:aggregate\n</code></pre>"},{"location":"c2sim-messages/c2sim-message-examples/","title":"C2SIM XML Message examples","text":""},{"location":"c2sim-messages/c2sim-message-examples/#schema-version","title":"Schema version","text":"<p>The examples are based on schema version '1.0.2' (used in CWIX 2025). Due to an XSD schema publishing error the '1.0.2' schema version still uses namespace <code>http://www.sisostds.org/schemas/C2SIM/1.1</code> namespace.</p>"},{"location":"c2sim-messages/c2sim-message-examples/#submit-initialization","title":"Submit Initialization","text":"<pre><code>&lt;Message xmlns=\"http://www.sisostds.org/schemas/C2SIM/1.1\"&gt;\n    &lt;C2SIMHeader&gt;\n        &lt;CommunicativeActTypeCode&gt;Accept&lt;/CommunicativeActTypeCode&gt;\n        &lt;ConversationID&gt;ab8ba502-b14b-4385-9741-c117c2ef4e55&lt;/ConversationID&gt;\n        &lt;FromSendingSystem&gt;LOX&lt;/FromSendingSystem&gt;\n        &lt;MessageID&gt;df0c8d2a-a098-4fcb-8e44-42ff4f9fb9df&lt;/MessageID&gt;\n        &lt;Protocol&gt;SISO-STD-C2SIM&lt;/Protocol&gt;\n        &lt;ProtocolVersion&gt;1.0.2&lt;/ProtocolVersion&gt;\n        &lt;SecurityClassificationCode&gt;Unclassified&lt;/SecurityClassificationCode&gt;\n        &lt;SendingTime&gt;\n            &lt;IsoDateTime&gt;2025-10-26T08:53:40Z&lt;/IsoDateTime&gt;\n        &lt;/SendingTime&gt;\n        &lt;ToReceivingSystem&gt;LOX&lt;/ToReceivingSystem&gt;\n    &lt;/C2SIMHeader&gt;\n    &lt;MessageBody&gt;\n        &lt;SystemMessageBody&gt;\n            &lt;SubmitInitialization/&gt;\n        &lt;/SystemMessageBody&gt;\n    &lt;/MessageBody&gt;\n&lt;/Message&gt;\n</code></pre>"},{"location":"c2sim-messages/c2sim-message-examples/#share-scenario","title":"Share Scenario","text":"<pre><code>&lt;Message xmlns=\"http://www.sisostds.org/schemas/C2SIM/1.1\"&gt;\n    &lt;C2SIMHeader&gt;\n        &lt;CommunicativeActTypeCode&gt;Accept&lt;/CommunicativeActTypeCode&gt;\n        &lt;ConversationID&gt;b0c5ecc1-c589-4e53-8ae0-6e46eadf338e&lt;/ConversationID&gt;\n        &lt;FromSendingSystem&gt;LOX&lt;/FromSendingSystem&gt;\n        &lt;MessageID&gt;14ab2767-df03-4de0-994c-85593c9a4813&lt;/MessageID&gt;\n        &lt;Protocol&gt;SISO-STD-C2SIM&lt;/Protocol&gt;\n        &lt;ProtocolVersion&gt;1.0.2&lt;/ProtocolVersion&gt;\n        &lt;SecurityClassificationCode&gt;Unclassified&lt;/SecurityClassificationCode&gt;\n        &lt;SendingTime&gt;\n            &lt;IsoDateTime&gt;2025-10-26T08:58:48Z&lt;/IsoDateTime&gt;\n        &lt;/SendingTime&gt;\n        &lt;ToReceivingSystem&gt;LOX&lt;/ToReceivingSystem&gt;\n    &lt;/C2SIMHeader&gt;\n    &lt;MessageBody&gt;\n        &lt;SystemMessageBody&gt;\n            &lt;ShareScenario/&gt;\n        &lt;/SystemMessageBody&gt;\n    &lt;/MessageBody&gt;\n&lt;/Message&gt;\n</code></pre>"},{"location":"c2sim-messages/c2sim-message-examples/#start-scenario","title":"Start Scenario","text":"<pre><code>&lt;Message xmlns=\"http://www.sisostds.org/schemas/C2SIM/1.1\"&gt;\n    &lt;C2SIMHeader&gt;\n        &lt;CommunicativeActTypeCode&gt;Accept&lt;/CommunicativeActTypeCode&gt;\n        &lt;ConversationID&gt;7083dc5c-64ea-4b91-80df-cb7308209167&lt;/ConversationID&gt;\n        &lt;FromSendingSystem&gt;LOX&lt;/FromSendingSystem&gt;\n        &lt;MessageID&gt;3d4802f3-35c0-414e-90ac-bd51aee6d3ef&lt;/MessageID&gt;\n        &lt;Protocol&gt;SISO-STD-C2SIM&lt;/Protocol&gt;\n        &lt;ProtocolVersion&gt;1.0.2&lt;/ProtocolVersion&gt;\n        &lt;SecurityClassificationCode&gt;Unclassified&lt;/SecurityClassificationCode&gt;\n        &lt;SendingTime&gt;\n            &lt;IsoDateTime&gt;2025-10-26T09:00:55Z&lt;/IsoDateTime&gt;\n        &lt;/SendingTime&gt;\n        &lt;ToReceivingSystem&gt;LOX&lt;/ToReceivingSystem&gt;\n    &lt;/C2SIMHeader&gt;\n    &lt;MessageBody&gt;\n        &lt;SystemMessageBody&gt;\n            &lt;StartScenario/&gt;\n        &lt;/SystemMessageBody&gt;\n    &lt;/MessageBody&gt;\n&lt;/Message&gt;\n</code></pre>"},{"location":"c2sim-messages/c2sim-message-examples/#task-status","title":"Task status","text":"ENUM Description TASKABRT ABORT TASKCMPLT COMPLETE TASKINPRG IN PROGRESS TASKPEND PENDING TASKSTRT START <pre><code>&lt;Message xmlns=http://www.sisostds.org/schemas/C2SIM/1.1&gt;\n    &lt;C2SIMHeader&gt;\n        &lt;CommunicativeActTypeCode&gt;Accept&lt;/CommunicativeActTypeCode&gt;\n        &lt;ConversationID&gt;6fcf6992-863f-4c29-8082-c17b3cc7c07b&lt;/ConversationID&gt;\n        &lt;FromSendingSystem&gt;SYSTEM_A&lt;/FromSendingSystem&gt;\n        &lt;MessageID&gt;b662ebd4-773e-4212-adc3-6301f2e5a9b9&lt;/MessageID&gt;\n        &lt;Protocol&gt;SISO-STD-C2SIM&lt;/Protocol&gt;\n        &lt;ProtocolVersion&gt;1.0.2&lt;/ProtocolVersion&gt;\n        &lt;SecurityClassificationCode&gt;Unclassified&lt;/SecurityClassificationCode&gt;\n        &lt;SendingTime&gt;\n            &lt;IsoDateTime&gt;2025-10-31T15:12:58Z&lt;/IsoDateTime&gt;\n        &lt;/SendingTime&gt;\n        &lt;ToReceivingSystem&gt;SYSTEM_A&lt;/ToReceivingSystem&gt;\n    &lt;/C2SIMHeader&gt;\n    &lt;MessageBody&gt;\n        &lt;DomainMessageBody&gt;\n            &lt;ReportBody&gt;\n                &lt;FromSender&gt;71c32ed3-810b-490a-b6a7-bbe231534de6&lt;/FromSender&gt;\n                &lt;ToReceiver&gt;c4ed6e33-3749-4fa0-9db8-5b52bce57d89&lt;/ToReceiver&gt;\n                &lt;ReportContent&gt;\n                    &lt;TaskStatus&gt;\n                        &lt;TimeOfObservation&gt;\n                            &lt;DateTime&gt;\n&lt;IsoDateTime&gt;2025-10-31T15:12:58Z&lt;/IsoDateTime&gt;\n                            &lt;/DateTime&gt;\n                        &lt;/TimeOfObservation&gt;\n                        &lt;CurrentTask&gt;240d4341-b754-42a8-8a4a-cf551ed40761&lt;/CurrentTask&gt;\n                        &lt;TaskStatusCode&gt;TASKSTRT&lt;/TaskStatusCode&gt;\n                    &lt;/TaskStatus&gt;\n                &lt;/ReportContent&gt;\n                &lt;ReportID&gt;ad39030c-d3f1-4abf-8a27-88136ce85b31&lt;/ReportID&gt;\n                &lt;ReportingEntity&gt;683dd723-f408-406f-92c1-cdea10130966&lt;/ReportingEntity&gt;\n            &lt;/ReportBody&gt;\n        &lt;/DomainMessageBody&gt;\n    &lt;/MessageBody&gt;\n&lt;/Message&gt;\n</code></pre>"},{"location":"c2sim-messages/c2sim-message-examples/#position-report","title":"Position report","text":"<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?&gt;\n&lt;Message xmlns=\"http://www.sisostds.org/schemas/C2SIM/1.1\"&gt;\n    &lt;C2SIMHeader&gt;\n        &lt;CommunicativeActTypeCode&gt;Accept&lt;/CommunicativeActTypeCode&gt;\n        &lt;ConversationID&gt;c2f731c3-b069-4623-98c8-9c620898b459&lt;/ConversationID&gt;\n        &lt;FromSendingSystem&gt;SYSTEM_A&lt;/FromSendingSystem&gt;\n        &lt;MessageID&gt;3f979f94-8732-4131-85fe-54de091b30d5&lt;/MessageID&gt;\n        &lt;Protocol&gt;SISO-STD-C2SIM&lt;/Protocol&gt;\n        &lt;ProtocolVersion&gt;1.0.2&lt;/ProtocolVersion&gt;\n        &lt;SecurityClassificationCode&gt;Unclassified&lt;/SecurityClassificationCode&gt;\n        &lt;SendingTime&gt;\n            &lt;IsoDateTime&gt;2025-10-31T14:59:59Z&lt;/IsoDateTime&gt;\n        &lt;/SendingTime&gt;\n        &lt;ToReceivingSystem&gt;SYSTEM_A&lt;/ToReceivingSystem&gt;\n    &lt;/C2SIMHeader&gt;\n    &lt;MessageBody&gt;\n        &lt;DomainMessageBody&gt;\n            &lt;ReportBody&gt;\n                &lt;FromSender&gt;65556e95-7c5e-4889-9e86-40cc3a04b32f&lt;/FromSender&gt;\n                &lt;ToReceiver&gt;00000000-0000-0000-0000-000000000000&lt;/ToReceiver&gt;\n                &lt;ReportContent&gt;\n                    &lt;PositionReportContent&gt;\n                        &lt;TimeOfObservation&gt;\n                            &lt;DateTime&gt;\n                                &lt;IsoDateTime&gt;2025-10-31T14:59:59Z&lt;/IsoDateTime&gt;\n                            &lt;/DateTime&gt;\n                        &lt;/TimeOfObservation&gt;\n                        &lt;EntityHealthStatus&gt;\n                            &lt;OperationalStatus&gt;\n                                &lt;OperationalStatusCode&gt;FullyOperational&lt;/OperationalStatusCode&gt;\n                            &lt;/OperationalStatus&gt;\n                        &lt;/EntityHealthStatus&gt;\n                        &lt;EntityHealthStatus&gt;\n                            &lt;Strength&gt;\n                                &lt;StrengthPercentage&gt;43&lt;/StrengthPercentage&gt;\n                            &lt;/Strength&gt;\n                        &lt;/EntityHealthStatus&gt;\n                        &lt;HeadingAngle&gt;23.0&lt;/HeadingAngle&gt;\n                        &lt;Location&gt;\n                            &lt;GeodeticCoordinate&gt;\n                                &lt;AltitudeAGL&gt;0.0&lt;/AltitudeAGL&gt;\n                                &lt;Latitude&gt;3.0&lt;/Latitude&gt;\n                                &lt;Longitude&gt;33.0&lt;/Longitude&gt;\n                            &lt;/GeodeticCoordinate&gt;\n                        &lt;/Location&gt;\n                        &lt;Speed&gt;37.0&lt;/Speed&gt;\n                        &lt;SubjectEntity&gt;fa655ba7-5f75-4d9d-bbee-e871b33c8ae2&lt;/SubjectEntity&gt;\n                    &lt;/PositionReportContent&gt;\n                &lt;/ReportContent&gt;\n                &lt;ReportContent&gt;\n                    &lt;PositionReportContent&gt;\n                        &lt;TimeOfObservation&gt;\n                            &lt;DateTime&gt;\n                                &lt;IsoDateTime&gt;2025-10-31T14:59:59Z&lt;/IsoDateTime&gt;\n                            &lt;/DateTime&gt;\n                        &lt;/TimeOfObservation&gt;\n                        &lt;EntityHealthStatus&gt;\n                            &lt;OperationalStatus&gt;\n                                &lt;OperationalStatusCode&gt;FullyOperational&lt;/OperationalStatusCode&gt;\n                            &lt;/OperationalStatus&gt;\n                        &lt;/EntityHealthStatus&gt;\n                        &lt;EntityHealthStatus&gt;\n                            &lt;Strength&gt;\n                                &lt;StrengthPercentage&gt;6&lt;/StrengthPercentage&gt;\n                            &lt;/Strength&gt;\n                        &lt;/EntityHealthStatus&gt;\n                        &lt;HeadingAngle&gt;226.0&lt;/HeadingAngle&gt;\n                        &lt;Location&gt;\n                            &lt;GeodeticCoordinate&gt;\n                                &lt;AltitudeAGL&gt;0.0&lt;/AltitudeAGL&gt;\n                                &lt;Latitude&gt;-11.0&lt;/Latitude&gt;\n                                &lt;Longitude&gt;83.0&lt;/Longitude&gt;\n                            &lt;/GeodeticCoordinate&gt;\n                        &lt;/Location&gt;\n                        &lt;Speed&gt;21.0&lt;/Speed&gt;\n                        &lt;SubjectEntity&gt;dd972998-b6ae-4f93-b06a-3aa1ca5073f8&lt;/SubjectEntity&gt;\n                    &lt;/PositionReportContent&gt;\n                &lt;/ReportContent&gt;\n                &lt;ReportID&gt;6ff98ad9-d0a4-4343-8fa9-6ed797cd0288&lt;/ReportID&gt;\n                &lt;ReportingEntity&gt;6daf87f1-0015-4b44-b378-e3ac140f45c8&lt;/ReportingEntity&gt;\n            &lt;/ReportBody&gt;\n        &lt;/DomainMessageBody&gt;\n    &lt;/MessageBody&gt;\n&lt;/Message&gt;\n</code></pre>"},{"location":"c2sim-messages/c2sim-message-examples/#task-order","title":"Task order","text":"ENUM (most used TaskActionCode) MoveToLocation ATTACK DEFEND SCOUT <pre><code>&lt;Message xmlns=http://www.sisostds.org/schemas/C2SIM/1.1&gt;\n    &lt;C2SIMHeader&gt;\n        &lt;CommunicativeActTypeCode&gt;Accept&lt;/CommunicativeActTypeCode&gt;\n        &lt;ConversationID&gt;c2a90bdc-76b3-45d8-8d2a-4c97fe1dade0&lt;/ConversationID&gt;\n        &lt;FromSendingSystem&gt;TEST&lt;/FromSendingSystem&gt;\n        &lt;MessageID&gt;31cd312b-0114-4e39-8bab-a40682d97e79&lt;/MessageID&gt;\n        &lt;Protocol&gt;SISO-STD-C2SIM&lt;/Protocol&gt;\n        &lt;ProtocolVersion&gt;1.0.2&lt;/ProtocolVersion&gt;\n        &lt;SecurityClassificationCode&gt;Unclassified&lt;/SecurityClassificationCode&gt;\n        &lt;SendingTime&gt;\n            &lt;IsoDateTime&gt;2025-10-31T15:27:51Z&lt;/IsoDateTime&gt;\n        &lt;/SendingTime&gt;\n        &lt;ToReceivingSystem&gt;TEST&lt;/ToReceivingSystem&gt;\n    &lt;/C2SIMHeader&gt;\n    &lt;MessageBody&gt;\n        &lt;DomainMessageBody&gt;\n            &lt;OrderBody&gt;\n                &lt;FromSender&gt;00000000-0000-0000-0000-000000000000&lt;/FromSender&gt;\n                &lt;ToReceiver&gt;00000000-0000-0000-0000-000000000000&lt;/ToReceiver&gt;\n                &lt;IssuedTime&gt;\n                    &lt;IsoDateTime&gt;2025-10-31T15:27:51Z&lt;/IsoDateTime&gt;\n                &lt;/IssuedTime&gt;\n                &lt;OrderID&gt;73f1b4f4-6225-40a0-8ae1-517f6ead90b4&lt;/OrderID&gt;\n                &lt;Task&gt;\n                    &lt;ManeuverWarfareTask&gt;\n                        &lt;Location&gt;\n                            &lt;GeodeticCoordinate&gt;\n&lt;Latitude&gt;34.0&lt;/Latitude&gt;\n&lt;Longitude&gt;56.0&lt;/Longitude&gt;\n                            &lt;/GeodeticCoordinate&gt;\n                        &lt;/Location&gt;\n                        &lt;UUID&gt;ee99e41c-8f31-49c3-b705-d37c4d598c40&lt;/UUID&gt;\n                        &lt;PerformingEntity&gt;3f92a4b1-2c5d-4a08-bf61-8a79b62c9384&lt;/PerformingEntity&gt;\n                        &lt;TaskActionCode&gt;MoveToLocation&lt;/TaskActionCode&gt;\n                    &lt;/ManeuverWarfareTask&gt;\n                &lt;/Task&gt;\n            &lt;/OrderBody&gt;\n        &lt;/DomainMessageBody&gt;\n    &lt;/MessageBody&gt;\n&lt;/Message&gt;\n</code></pre>"},{"location":"c2sim-messages/c2sim-message-examples/#magic-move-teleport","title":"Magic move (teleport)","text":"<pre><code>    &lt;C2SIMHeader&gt;\n        &lt;CommunicativeActTypeCode&gt;Accept&lt;/CommunicativeActTypeCode&gt;\n        &lt;ConversationID&gt;7eda75a9-bcc2-4921-ae0f-6b3cd6b84676&lt;/ConversationID&gt;\n        &lt;FromSendingSystem&gt;SYSTEM_A&lt;/FromSendingSystem&gt;\n        &lt;MessageID&gt;0b4b29b7-1fb7-45c3-ba30-73100623a417&lt;/MessageID&gt;\n        &lt;Protocol&gt;SISO-STD-C2SIM&lt;/Protocol&gt;\n        &lt;ProtocolVersion&gt;1.0.2&lt;/ProtocolVersion&gt;\n        &lt;SecurityClassificationCode&gt;Unclassified&lt;/SecurityClassificationCode&gt;\n        &lt;SendingTime&gt;\n            &lt;IsoDateTime&gt;2025-10-29T15:42:40Z&lt;/IsoDateTime&gt;\n        &lt;/SendingTime&gt;\n        &lt;ToReceivingSystem&gt;SYSTEM_A&lt;/ToReceivingSystem&gt;\n    &lt;/C2SIMHeader&gt;\n    &lt;MessageBody&gt;\n        &lt;SystemMessageBody&gt;\n            &lt;MagicMove&gt;\n                &lt;EntityReference&gt;f8237259-9a3c-4939-ac2c-d188736386a2&lt;/EntityReference&gt;\n                &lt;Location&gt;\n                    &lt;GeodeticCoordinate&gt;\n                        &lt;Latitude&gt;10.0&lt;/Latitude&gt;\n                        &lt;Longitude&gt;20.0&lt;/Longitude&gt;\n                    &lt;/GeodeticCoordinate&gt;\n                &lt;/Location&gt;\n            &lt;/MagicMove&gt;\n        &lt;/SystemMessageBody&gt;\n    &lt;/MessageBody&gt;\n&lt;/Message&gt;\n</code></pre>"},{"location":"c2sim-messages/c2sim-messages/","title":"C2SIM Message","text":"<p>The C2SIM standard defined the RDF schema with the C2SIM ontology. This schema is converted to an XSD schema (with XLST transformation). From this XSD schema JAVA classes are generated (JAXB).</p> <p></p> <p>The root element is <code>Message</code> (of type <code>MessageType</code>)</p> <p></p> <p>The <code>message</code> has two elements at root level:</p> XML element Description C2SIMHeader Administrative information about the message. Used for authorization, routing and filtering. MessageBody The payload containing the actual content of the C2SIM message."},{"location":"c2sim-messages/c2sim-messages/#schema-version","title":"Schema version","text":"<p>Each <code>C2SIM sxd schema</code> should have it own version namespace. However, due to publication error all XSD schema's have namespace <code>http://www.sisostds.org/schemas/C2SIM/1.1</code>. </p>"},{"location":"c2sim-messages/c2sim-messages/#c2sim-header","title":"C2SIM Header","text":"<p>The fields within the C2SIM header are under discussion. The C2SIM standard uses FIPA, but FIPA has become obsolete.</p> <p>Example of XML header section: </p>"},{"location":"c2sim-messages/c2sim-messages/#message-payload","title":"Message payload","text":"<p>Types of information:</p> <ul> <li> <p>Scenario Initialization</p> </li> <li> <p>Organizational Structure (ORBAT)</p> </li> <li> <p>Orders (Tasking)</p> </li> <li> <p>Reporting</p> </li> <li> <p>Position / Strength / Readiness</p> </li> <li> <p>Resource status</p> </li> <li> <p>Observations </p> </li> <li> <p>Task progress and completion status</p> </li> </ul>"},{"location":"c2sim-messages/c2sim-messages/#message-kind","title":"Message kind","text":"<p>The message types are divided  into 5 main categories:</p> Category Description C2SIMInitializationBody Scenario initialization (orbat structure, etc.) DomainMessageBody Orders and reports ObjectInitializationBody Initialization of single systems SystemAcknowledgeBody N/A SystemMessageBody Command message <p>Each payload contains one message kind (root element). The enumeration type <code>C2SimMsgKind</code> in the package <code>org.c2sim.lox</code> is used to identify the message kind. This is based on existing xpath.</p> Message kind enumeration XPath C2SIM_INITIALIZATION /Message/MessageBody/C2SIMInitializationBody OBJECT_INITIALIZATION /Message/MessageBody/ObjectInitializationBody ORDER /Message/MessageBody/DomainMessageBody/OrderBody REPORT /Message/MessageBody/DomainMessageBody/ReportBody CHECKPOINT_RESTORE /Message/MessageBody/SystemMessageBody/CheckpointRestore START_SCENARIO /Message/MessageBody/SystemMessageBody/StartScenario STOP_SCENARIO /Message/MessageBody/SystemMessageBody/StopScenario RESUME_SCENARIO /Message/MessageBody/SystemMessageBody/ResumeScenario RESET_SCENARIO /Message/MessageBody/SystemMessageBody/ResetScenario PAUSE_SCENARIO /Message/MessageBody/SystemMessageBody/PauseScenario SHARE_SCENARIO /Message/MessageBody/SystemMessageBody/ShareScenario SUBMIT_INITIALIZATION /Message/MessageBody/SystemMessageBody/SubmitInitialization INITIALIZATION_COMPLETE /Message/MessageBody/SystemMessageBody/InitializationComplete MAGIC_MOVE /Message/MessageBody/SystemMessageBody/MagicMove SET_SIMULATION_REALTIME_MULTIPLE /Message/MessageBody/SystemMessageBody/SetSimulationRealtimeMultiple"},{"location":"c2sim-server/c2sim-implementation-in-nutshell/","title":"C2SIM server implementation","text":"<p>The standards <code>SISO-STD-019-2020</code> and <code>SISO-STD-020-2020</code> only define <code>what</code> information must be available to make C2SIM system interoperable.  </p> <p>The document <code>C2SIM Server Interface specification</code> describes the <code>how</code>.</p>"},{"location":"c2sim-server/c2sim-implementation-in-nutshell/#in-a-nutshell","title":"In a nutshell","text":"<p><code>C2SIM clients</code> (systems) can connect to the <code>C2SIM Server</code> and join a <code>shared session</code>. Within this <code>shared sessions</code> the <code>C2SIM client</code> can receive and send <code>C2SIM Messages</code>. A <code>shared session</code> the <code>C2SIM clients</code> are sharing the same context (e.g. C2SIM schema version, C2SIm server state, .....). The <code>C2SIM server</code> can manage multiple <code>shared sessions</code> simultaneously. </p>"},{"location":"c2sim-server/c2sim-implementation-in-nutshell/#restful-api","title":"Restful API","text":"<p>The communication between <code>C2SIM client</code> and <code>C2SIM server</code> is defined in OpenAPI specification format.  </p> <p>Advantages of OpenAPI are:</p> <ol> <li> <p>It provides a clear and standardized description of an API.</p> </li> <li> <p>It allows automatic generation of documentation.</p> </li> <li> <p>It enables automatic code generation for clients and servers.</p> </li> <li> <p>It makes API testing and validation easier.</p> </li> <li> <p>It helps ensure consistency and accuracy in API design.</p> </li> </ol> <p>The <code>C2SIM OpenAPI spec</code> can be viewed and tested here</p>"},{"location":"c2sim-server/c2sim-implementation-in-nutshell/#server-side-push-sse","title":"Server side push (SSE)","text":"<p>One disadvantage of OpenAPI is that it is primarily designed for client-to-server request-response communication and does not directly support server-side push (SSE) mechanisms.  Therefore a server-side push mechanism was added to the C2SIm server implementation. The reference implementation uses a <code>WebSocket</code> to do server side push <code>C2SIM Messages</code> to the <code>C2SIM client</code>. This is SSE, therefore uni-directional communication (from server to client).</p>"},{"location":"c2sim-server/c2sim-implementation-in-nutshell/#shared-session","title":"Shared session","text":"<p>A <code>C2SIM client</code> can create a <code>shared session</code> trough a RESTful call. Or join an existing <code>shared session</code>. The reserved <code>shared session</code> named <code>default</code> is always available.</p>"},{"location":"c2sim-server/c2sim-implementation-in-nutshell/#standard-c2sim-client-flow","title":"Standard C2SIM client flow","text":"<pre><code>sequenceDiagram\n\nparticipant C2SIM_CLIENT\nparticipant C2SIM_SERVER\n\n%% Get stream endpoint and setup stream\nC2SIM_CLIENT-&gt;&gt;C2SIM_SERVER: REST GET /c2sim/session/default/stream-endpoints\nNote right of C2SIM_SERVER: Client requests information to setup stream for session 'default'\n\nC2SIM_SERVER--&gt;&gt;C2SIM_CLIENT: 200 (OK)\nNote right of C2SIM_CLIENT: Server provides WebSocket endpoint\n\nC2SIM_CLIENT-&gt;&gt;C2SIM_SERVER: Setup WebSocket streaming connection\nNote right of C2SIM_SERVER: Client uses endpoint to establish stream\n\nC2SIM_CLIENT--&gt;&gt;C2SIM_SERVER: WebSocket connection established\nNote right of C2SIM_SERVER: Stream accepted\\nData sent only after join\n\n%% Joining the session\nC2SIM_CLIENT-&gt;&gt;C2SIM_SERVER: REST POST /c2sim/session/default/join\nNote right of C2SIM_SERVER: Client requests to join session\n\nC2SIM_SERVER--&gt;&gt;C2SIM_CLIENT: 200 (OK)\nNote right of C2SIM_CLIENT: Client added\\nCurrent state returned\\nClient can now publish and receive\n\n%% Participate\nC2SIM_CLIENT-&gt;&gt;C2SIM_SERVER: REST POST /c2sim/session/default/send\nNote right of C2SIM_SERVER: Publish C2SIM message\\n(e.g. report, command)\n\nC2SIM_SERVER--&gt;&gt;C2SIM_CLIENT: 200 (OK)\nNote right of C2SIM_CLIENT: Message validated\\nState updated / distributed\n\n%% Receive messages\nC2SIM_SERVER--&gt;&gt;C2SIM_CLIENT: C2SIM message (WebSocket stream)\nNote right of C2SIM_CLIENT: Messages from other clients</code></pre>"},{"location":"c2sim-server/c2sim-server-architecture/","title":"C2SIM Architecture","text":""},{"location":"c2sim-server/c2sim-server-architecture/#project-structure","title":"Project structure","text":"<pre><code>root/\n\u251c\u2500\u2500 docker/                    # Build and deploy C2SIM server from docker\n\u251c\u2500\u2500 server/                    # C2SIM server implementation\n\u251c\u2500\u2500 docs/                      # mkdocs server documentation\n\u251c\u2500\u2500 open-api-spec/             # C2SIM Restful API specification\n</code></pre>"},{"location":"c2sim-server/c2sim-server-architecture/#c2sim-server-project-structure","title":"C2SIM-Server Project structure","text":"<pre><code>server/\n\u251c\u2500\u2500 c2sim-server/                    # C2SIM server \n\u251c\u2500\u2500 c2sim-statemachine/              # C2SIM State machinelibrary\n\u251c\u2500\u2500 c2sim-authorizer/                # JWT/OIDC authorization\n\u251c\u2500\u2500 open-api-javalin-server-stub/    # Generated Kotlin stubs (OpenAPI)\n\u251c\u2500\u2500 c2sim-client/                    # Java C2SIM client library\n\u251c\u2500\u2500 c2sim-land-operation-extension/  # Generated C2SIM XML/JAXB bindings\n\u2514\u2500\u2500 c2sim-client-app/                # Example client application\n</code></pre>"},{"location":"c2sim-server/c2sim-server-architecture/#java-modules","title":"JAVA Modules","text":"Module Description c2sim-server The C2SIM server implementation c2sim-statemachine Library that handles the C2SIM state machine (logic can be used for client and server). c2sim-client JAVA Library with C2SIM Client to connect to C2SIM server. open-api-javalin-server-stub Library with server generated stubs, based on OpenAPI spec. c2sim-land-operation-extension Helper functions for generated C2SIM XML code."},{"location":"c2sim-server/c2sim-server-architecture/#module-dependencies","title":"Module Dependencies","text":"<pre><code>graph TD\n    A[c2sim-server] --&gt; B[c2sim-statemachine]\n    A --&gt; C[c2sim-authorizer]\n    A --&gt; D[open-api-javalin-server-stub]\n    A --&gt; E[c2sim-land-operation-extension]\n    F[c2sim-client] --&gt; D\n    F --&gt; E\n    G[c2sim-client-app] --&gt; F</code></pre>"},{"location":"c2sim-server/configuration/","title":"C2SIM configuration","text":""},{"location":"c2sim-server/configuration/#environment-setting","title":"Environment setting","text":"<p>Most configuration settings are done trough <code>ENVIRONMENT VARIABLE</code>. Can be easily adjusted in a docker / Kubernetes deployment.  The file <code>org.c2sim.server.services.impl.DefaultConfigService</code> defines all config settings.</p>"},{"location":"c2sim-server/configuration/#server-configuration","title":"Server configuration","text":"<p>The file <code>server-config.json</code> is loaded by the C2SIM-server on startup. It contains the predefined <code>default</code> shared session. If the file is not found, the default (hardcoded) settings will be used. This all to have multiple pre-created shared sessions.</p>"},{"location":"c2sim-server/configuration/#configuration","title":"Configuration","text":"<p>This table is <code>auto generated</code>from C2SIM server endpoint <code>/configuration</code>.  This endpoint is available when ENV <code>C2SIM_EXPOSE_CFG_ENDPOINT</code> is set to<code>true</code>. For example <code>http://localhost:7777/configuration</code>.</p> Environment Description Data Type Default Value Allowed Values C2SIM_XSD_VALIDATION_ENABLED Xsd validation for C2SIM XML enabled Boolean true true - C2SIM_MAX_MSG_SIZE_MB Max REST body size (MB) for C2SIM messages Float 10.0 10.0 - C2SIM_EXTERNAL_HOSTNAME External hostname or ip address of C2SIM server (when empty ignore) String 127.0.0.1 127.0.0.1 - C2SIM_EXTERNAL_PORT_NUMBER External port number of C2SIM server Integer 7777 7777 - C2SIM_AUTH_MODE Bearer tokens (not required (disables all auth) / mandatory / mixed) EAuthLevel MIXED_AUTH MIXED_AUTH NO_AUTH, MIXED_AUTH, STRICT_AUTH C2SIM_BEARER_PUBLIC_KEY When empty: public key fetched from Identity Provider. When set, this key is used (no IDP needed) String - C2SIM_IDENTITY_PROVIDER_URL The URL of the Identity Provider String - C2SIM_EXPOSE_CFG_ENDPOINT Configuration endpoint /configuration is be exposed Boolean true true -"},{"location":"c2sim-server/endpoints/","title":"C2SIM server endpoints","text":"<p>The <code>C2SIM-Server</code> exposes the following endpoints</p> Endpoint Description Condition /api/* All <code>C2SIM OpenAPI\u00a0RESTFul operation</code>. See this link / Web page with shortcuts to important endpoint of C2SIM sever /openapi-ui.html OpenAPI web interface (viewing and testing) /status Active <code>shared sessions</code>\u00a0and connected <code>C2SIM clients</code>\u00a0(debug only) /configuration Shows all ENV options with current value in Mark Down notation ENV <code>C2SIM_EXPOSE_CFG_ENDPOINT</code> /metrics Metrics endpoint /health Health endpoint. Returns status code <code>200</code>\u00a0when healthy."},{"location":"c2sim-server/logging/","title":"Logging","text":""},{"location":"c2sim-server/logging/#logging-framework","title":"Logging framework","text":"<p>This project uses the Logback Java logging framework created by the same author as Log4j (successor to Log4j).</p> <p>It works together with SLF4J, which acts as a logging API (facade), while Logback is the actual implementation.</p>"},{"location":"c2sim-server/logging/#configure-logger","title":"Configure logger","text":"<p>File: <code>server/c2sim-server/src/main/resources/logback.xml</code></p> <pre><code>&lt;configuration&gt;\n    &lt;!-- Set log level for C2SIM classes --&gt;\n    &lt;logger name=\"org.c2sim\" level=\"DEBUG\"/&gt;\n\n    &lt;!-- Suppress verbose libraries --&gt;\n    &lt;logger name=\"org.eclipse.jetty\" level=\"WARN\"/&gt;\n    &lt;logger name=\"io.javalin\" level=\"INFO\"/&gt;\n\n    &lt;!-- Root logger --&gt;\n    &lt;root level=\"INFO\"&gt;\n        &lt;appender-ref ref=\"STDOUT\"/&gt;\n    &lt;/root&gt;\n&lt;/configuration&gt;\n</code></pre> <p>Change levels at runtime (in code):</p> <pre><code>import ch.qos.logback.classic.Level;\nimport ch.qos.logback.classic.Logger;\nimport org.slf4j.LoggerFactory;\n\nLogger logger = (Logger) LoggerFactory.getLogger(\"org.c2sim\");\nlogger.setLevel(Level.TRACE);\n</code></pre>"},{"location":"c2sim-server/module-c2sim-authorization/","title":"Module C2SIM Authorization","text":"<p>This module handles all functionality for handling OpenID <code>C2SIM claims</code>. The <code>JWT token</code> signature is validated, <code>C2SIM claims</code> are extracted from <code>JWT payload</code>. And the claims can be validated against a <code>C2SIM message</code>.</p> <p>More information over OpenID C2SIM</p> <p><code>C2SIM Server</code> uses <code>Autherizer</code> package to validate <code>JWT bearer token</code>:</p> <pre><code>sequenceDiagram\n    participant Client\n    participant Keycloak\n    participant C2SIMServer\n    participant Authorizer\n\n    Client-&gt;&gt;Keycloak: Request token with c2sim scope\n    Keycloak-&gt;&gt;Client: JWT with c2sim claims\n    Client-&gt;&gt;C2SIMServer: POST message + Bearer token\n    C2SIMServer-&gt;&gt;Authorizer: Validate token\n    Authorizer-&gt;&gt;Keycloak: Fetch JWKS\n    Keycloak-&gt;&gt;Authorizer: Public keys\n    Authorizer-&gt;&gt;Authorizer: Verify signature\n    Authorizer-&gt;&gt;Authorizer: Check claims vs message\n    Authorizer-&gt;&gt;C2SIMServer: AuthorizationResult\n    alt Authorized\n        C2SIMServer-&gt;&gt;C2SIMServer: Process message\n    else Denied\n        C2SIMServer-&gt;&gt;Client: 403 Forbidden\n    end</code></pre>"},{"location":"c2sim-server/module-c2sim-client/","title":"Module c2sim-client","text":""},{"location":"c2sim-server/module-c2sim-client/#overview","title":"Overview","text":"<p><code>C2SimClient</code> is a Java client library that enables applications to connect to the C2SIM server, join shared simulation sessions, publish and receive C2SIM XML messages, and participate in collaborative command-and-control simulations.</p> <p>The client handles:</p> <ul> <li> <p>Session Management: Join/resign from shared sessions with other systems</p> </li> <li> <p>Message Publishing: Send C2SIM XML documents with XSD validation</p> </li> <li> <p>Message Receiving: Stream C2SIM messages via WebSocket with optional validation/decoding</p> </li> <li> <p>State Synchronization: Track and respond to C2SIM server state changes</p> </li> <li> <p>OIDC Authentication: Secure connections with JWT tokens from OIDC providers</p> </li> <li> <p>Error Handling: Comprehensive exception handling and retry logic</p> </li> </ul>"},{"location":"c2sim-server/module-c2sim-client/#installation","title":"Installation","text":"<p>Add the C2SIM client library to your Maven <code>pom.xml</code>:</p> <pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.c2sim&lt;/groupId&gt;\n    &lt;artifactId&gt;c2sim-client&lt;/artifactId&gt;\n    &lt;version&gt;1.0.2-federates&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>"},{"location":"c2sim-server/module-c2sim-client/#quick-start","title":"Quick Start","text":""},{"location":"c2sim-server/module-c2sim-client/#basic-connection","title":"Basic Connection","text":"<pre><code>import org.c2sim.client.C2SimClient;\nimport org.c2sim.client.security.OidcCredentialFlow;\nimport org.c2sim.client.security.OidcCredentialFlowConfig;\nimport java.net.URI;\n\n// Set up OIDC authentication\nOidcCredentialFlowConfig authCfg = new OidcCredentialFlowConfig(\n    URI.create(\"http://localhost:8080/realms/c2sim/.well-known/openid-configuration\"),\n    \"client\",      // client ID\n    \"secret\"       // client secret\n);\n\nOidcTokenProvider oidcProvider = new OidcCredentialFlow(authCfg);\n\n// Create and connect client\nC2SimClient client = new C2SimClient.Builder()\n    .url(\"http://localhost:7777/api\")\n    .systemName(\"MY_SYSTEM\")\n    .clientIdDisplayName(\"MyClient\")\n    .oidcProvider(oidcProvider)\n    .build();\n\nclient.connect();  // Joins the \"default\" shared session\n</code></pre>"},{"location":"c2sim-server/module-c2sim-client/#builder-pattern","title":"Builder Pattern","text":"<p>The <code>C2SimClient.Builder</code> provides a fluent API for configuring the client:</p> <pre><code>C2SimClient client = new C2SimClient.Builder()\n    .url(\"http://localhost:7777/api\") // Server API endpoint (required)\n    .systemName(\"SYSTEM_A\")           // System name for this client (required)\n    .clientIdDisplayName(\"Client-A\")  // Display name (optional, auto-generated if omitted)\n    .clientId(\"custom-client-id\")     // Explicit client ID (optional)\n    .sharedSessionName(\"default\")     // Session to join (default: \"default\")\n    .oidcProvider(oidcProvider)       // OIDC token provider (optional)\n    .listener(new MyClientListener())// Lifecycle callbacks (optional)\n    .enableSendMessageValidation()   // Validate XML before sending (optional)\n    .enableReceivedMessageValidation() // Validate received XML (optional)\n    .enableReceivedMessageDecode()   // Decode XML to Java POJOs (optional)\n    .beautifyXml()                   // Pretty-print sent XML (optional)\n    .build();\n</code></pre>"},{"location":"c2sim-server/module-c2sim-client/#core-concepts","title":"Core Concepts","text":""},{"location":"c2sim-server/module-c2sim-client/#shared-sessions","title":"Shared Sessions","text":"<p>A shared session allows multiple clients (systems) to collaborate in a simulation:</p> <pre><code>// Join a session\nclient.connect();  // or client.connectAsync() for non-blocking\n// Check connection status\nboolean isJoined = client.isJoined();\nboolean hasStream = client.hasStreamToSharedSession();\n// Get session information\nList&lt;DynamicSessionInfo&gt; sessions = client.getSharedSessionsFromC2SimServer();\nDynamicSessionInfo sessionInfo = client.getSessionInfoFromC2SimServer(\"default\");\n// Disconnect\nclient.disconnect();\n</code></pre>"},{"location":"c2sim-server/module-c2sim-client/#state-management","title":"State Management","text":"<p>Track the C2SIM server state:</p> <pre><code>// Get cached state\n\nStateType state = client.getCachedC2SimServerState();\n// Listen for state changes with a listener\nclient.setC2simClientListener(new C2SimClient.C2SimClientListener() {\n    @Override\n    public void onStateChanged(C2SimClient client, StateType oldState, StateType newState) {\n        System.out.println(\"State changed: \" + oldState + \" -&gt; \" + newState);\n    }\n});\n</code></pre> <p>State Transitions: <code>UNINITIALIZED</code> \u2192 <code>INITIALIZING</code> \u2192 <code>INITIALIZED</code> \u2192 <code>RUNNING</code> (\u2194 <code>PAUSED</code>)</p>"},{"location":"c2sim-server/module-c2sim-client/#message-publishing","title":"Message Publishing","text":"<p>Send C2SIM XML documents to the server:</p> <pre><code>// Publish from a Java POJO (requires JAXB bindings)\n\nMessageType message = createMyC2SimMessage();\nclient.publishC2SimDocument(message);\n// Publish raw XML string\nString xmlDocString = \"&lt;C2SIM&gt;...&lt;/C2SIM&gt;\";\nclient.publishC2SimDocument(xmlDocString);\n// Publish with explicit validation\nLoxXsdValidator validation = client.publishC2SimDocument(xmlString, true);\nif (validation != null &amp;&amp; !validation.isValid()) {\n    System.out.println(\"Validation errors: \" + validation.getValidationErrors());\n}\n</code></pre>"},{"location":"c2sim-server/module-c2sim-client/#message-receiving","title":"Message Receiving","text":"<p>Consume C2SIM messages via WebSocket stream:</p> <pre><code>// Register callback for received messages\nclient.onReceivedMessage(msg -&gt; {\n    String messageType = msg.kind();\n    String xmlContent = msg.xmlMessage();\n    // Check validation result (if enabled)\n    if (msg.validationException() != null) {\n        System.err.println(\"Validation error: \" + msg.validationException());\n    } else if (msg.validation() != null) {\n        System.out.println(\"Valid: \" + msg.validation().isValid());\n    }\n    // Decoded message (if decoding enabled)\n    // MessageType decodedMsg = msg.decodedMsg();\n\n});\n</code></pre> <p>Message types include: <code>START_SCENARIO</code>, <code>PAUSE_SCENARIO</code>, <code>RESUME_SCENARIO</code>, <code>RESET_SCENARIO</code>, <code>SHARE_SCENARIO</code>, <code>SUBMIT_INITIALIZATION</code>, <code>C2SIM_INITIALIZATION</code>, and domain-specific orders/reports.</p>"},{"location":"c2sim-server/module-c2sim-client/#state-machine-triggers","title":"State Machine Triggers","text":"<p>Trigger state transitions by sending state machine commands:</p> <pre><code>import org.c2sim.statemachine.Trigger;\nclient.sendTrigger(Trigger.SUBMIT_INITIALIZATION);  // Move to INITIALIZING\nclient.sendTrigger(Trigger.SHARE_SCENARIO);         // Move to INITIALIZED\nclient.sendTrigger(Trigger.START_SCENARIO);         // Move to RUNNING\nclient.sendTrigger(Trigger.PAUSE_SCENARIO);         // Pause the simulation\nclient.sendTrigger(Trigger.RESUME_SCENARIO);        // Resume from pause\n</code></pre>"},{"location":"c2sim-server/module-c2sim-client/#listener-pattern","title":"Listener Pattern","text":"<p>Implement <code>C2SimClientListener</code> for lifecycle callbacks:</p> <pre><code>public class MyClientListener implements C2SimClient.C2SimClientListener {\n    @Override\n    public void onJoined(C2SimClient client, DynamicSessionInfo info) {\n        System.out.println(\"Joined session: \" + info.getSessionName());\n    }\n\n    @Override\n    public void onResigned(C2SimClient client) {\n        System.out.println(\"Resigned from session\");\n    }\n\n    @Override\n    public void onStreamConnected(C2SimClient client) {\n        System.out.println(\"WebSocket stream connected\");\n    }\n\n    @Override\n    public void onStreamDisconnected(C2SimClient client, int code, String reason) {\n        System.out.println(\"Stream disconnected: \" + code + \" - \" + reason);\n    }\n\n    @Override\n    public void onStateChanged(C2SimClient client, StateType oldState, StateType newState) {\n        System.out.println(\"State: \" + oldState + \" -&gt; \" + newState);\n    }\n\n    @Override\n    public void onC2SIMInitialization(C2SimClient client, C2SIMInitializationBodyType init) {\n        System.out.println(\"Received initialization\");\n    }\n}\n// Attach listener during build or later\nclient.setC2simClientListener(new MyClientListener());\n</code></pre>"},{"location":"c2sim-server/module-c2sim-client/#oidc-authentication","title":"OIDC Authentication","text":"<p>For secure connections, configure OIDC:</p> <pre><code>import org.c2sim.client.security.OidcCredentialFlow;\n\nimport org.c2sim.client.security.OidcCredentialFlowConfig;\n\nOidcCredentialFlowConfig config = new OidcCredentialFlowConfig(\n    URI.create(\"http://keycloak:8080/realms/c2sim/.well-known/openid-configuration\"),\n    \"my-client-id\",\n    \"my-client-secret\"\n);\n\nOidcTokenProvider tokenProvider = new OidcCredentialFlow(config);\n\nC2SimClient client = new C2SimClient.Builder()\n    .url(\"http://localhost:7777/api\")\n    .systemName(\"MY_SYSTEM\")\n    .oidcProvider(tokenProvider)\n    .build();\n</code></pre> <p>The token provider automatically:</p> <ul> <li> <p>Obtains JWT tokens from the OIDC provider</p> </li> <li> <p>Refreshes tokens when expired</p> </li> <li> <p>Injects tokens into request headers via <code>AuthInterceptor</code></p> </li> </ul>"},{"location":"c2sim-server/module-c2sim-client/#message-validation-and-processing","title":"Message Validation and Processing","text":""},{"location":"c2sim-server/module-c2sim-client/#client-side-xsd-validation","title":"Client-Side XSD Validation","text":"<p>Validate messages against the C2SIM schema:</p> <pre><code>C2SimClient client = new C2SimClient.Builder()\n    .url(\"http://localhost:7777/api\")\n    .systemName(\"MY_SYSTEM\")\n    .enableSendMessageValidation()       // Validate before sending\n    .enableReceivedMessageValidation()   // Validate after receiving\n    .build();\n// Publishing with validation\ntry {\n   client.publishC2SimDocument(xmlString);\n} catch (ValidationException e) {\n    e.getValidationResult().getValidationErrors().forEach(System.out::println);\n}\n</code></pre>"},{"location":"c2sim-server/module-c2sim-client/#message-decoding","title":"Message Decoding","text":"<p>Enable automatic XML-to-Java conversion:</p> <pre><code>C2SimClient client = new C2SimClient.Builder()\n    .url(\"http://localhost:7777/api\")\n    .systemName(\"MY_SYSTEM\")\n    .enableReceivedMessageDecode()\n    .build();\n // Messages are decoded to MessageType POJO\nclient.onReceivedMessage(msg -&gt; {\n    if (msg.decodedMsg() != null) {\n        MessageType decoded = msg.decodedMsg();\n        // Work with typed objects\n    }\n\n});\n</code></pre>"},{"location":"c2sim-server/module-c2sim-client/#session-creation","title":"Session Creation","text":"<p>Automatically create a shared session if it doesn't exist:</p> <pre><code>C2SimClient client = new C2SimClient.Builder()\n   .url(\"http://localhost:7777/api\")\n   .systemName(\"MY_SYSTEM\")\n   .sharedSessionName(\"my-custom-session\")\n   .build();\n\n// Provide session metadata when creating\nclient.whenCreatingSharedSession(() -&gt; new RequestCreateSession()\n    .data(new SessionInfo()\n       .displayName(\"My Simulation\")\n       .description(\"Test scenario\")\n       .c2simSchemaVersion(\"1.0.2\")));\nclient.connect();  // Creates session if needed\n</code></pre>"},{"location":"c2sim-server/module-c2sim-client/#error-handling","title":"Error Handling","text":"<p>The client throws checked exceptions for API failures:</p> <pre><code>import org.c2sim.client.exceptions.C2ClientException;\nimport org.c2sim.client.exceptions.C2SimRestException;\nimport org.c2sim.client.invoker.ApiException;\nimport org.c2sim.lox.exceptions.ValidationException;\n\ntry {\n   client.connect();\n} catch (C2SimRestException e) {\n    System.err.println(\"REST API error: \" + e.getMessage());\n} catch (C2ClientException e) {\n    System.err.println(\"Client error: \" + e.getMessage());\n    System.err.println(\"Error code: \" + e.getErrorCode());\n} catch (ApiException e) {\n    System.err.println(\"API invocation failed\");\n}\n\ntry {\n    client.publishC2SimDocument(xml);\n\n} catch (ValidationException e) {\n    System.err.println(\"XML validation failed\");\n    e.getValidationResult().getValidationErrors().forEach(System.err::println);\n}\n</code></pre>"},{"location":"c2sim-server/module-c2sim-client/#async-connection","title":"Async Connection","text":"<p>For non-blocking connection attempts with automatic retry:</p> <pre><code>// Attempt connection asynchronously with exponential backoff\n\nclient.connectAsync();\n</code></pre> <p>The client will retry every 5 seconds if the connection fails.</p>"},{"location":"c2sim-server/module-c2sim-client/#late-join-scenarios","title":"Late-Join Scenarios","text":"<p>When a client joins a session already in progress, it automatically receives the current scenario initialization:</p> <pre><code>client.setC2simClientListener(new C2SimClient.C2SimClientListener() {\n\n    @Override\n    public void onC2SIMInitialization(C2SimClient client, C2SIMInitializationBodyType init) {\n        // Late-joined clients automatically receive init\n        System.out.println(\"Scenario initialized: \" + init);\n    }\n});\n\n\n\nclient.connect();  // Will fetch initialization if joining in-progress session\n</code></pre>"},{"location":"c2sim-server/module-c2sim-client/#complete-example","title":"Complete Example","text":"<pre><code>import org.c2sim.client.C2SimClient;\nimport org.c2sim.client.security.OidcCredentialFlow;\nimport org.c2sim.client.security.OidcCredentialFlowConfig;\nimport org.c2sim.statemachine.Trigger;\nimport java.net.URI;\n\npublic class C2SimExample {\n    public static void main(String[] args) throws Exception {\n        // Setup OIDC\n        OidcTokenProvider tokens = new OidcCredentialFlow(\n            new OidcCredentialFlowConfig(\n               URI.create(\"http://localhost:8080/realms/c2sim/.well-known/openid-configuration\"),\n                \"client\",\n                \"secret\"\n            )\n        );\n\n        // Create client\n        C2SimClient client = new C2SimClient.Builder()\n            .url(\"http://localhost:7777/api\")\n            .systemName(\"COMMAND_CENTER\")\n            .clientIdDisplayName(\"CC-Client-1\")\n            .oidcProvider(tokens)\n            .enableSendMessageValidation()\n            .enableReceivedMessageValidation()\n            .listener(new C2SimClient.C2SimClientListener() {\n                @Override\n                public void onStateChanged(C2SimClient c, StateType old, StateType neu) {\n                    System.out.println(\"&gt;&gt; State: \" + old + \" -&gt; \" + neu);\n                }\n            })\n            .build();\n\n        // Register message handler\n        client.onReceivedMessage(msg -&gt; {\n            System.out.println(\"Received: \" + msg.kind());\n        });\n\n        // Connect to shared session\n        client.connect();\n        System.out.println(\"Connected to session\");\n\n        // Trigger state transitions\n        client.sendTrigger(Trigger.SUBMIT_INITIALIZATION);\n        client.sendTrigger(Trigger.SHARE_SCENARIO);\n        client.sendTrigger(Trigger.START_SCENARIO);\n\n        // Publish messages\n        String myXml = \"&lt;C2SIM&gt;...&lt;/C2SIM&gt;\";\n        client.publishC2SimDocument(myXml);\n\n        // Keep running\n        Thread.currentThread().join();\n\n    }\n\n}\n</code></pre>"},{"location":"c2sim-server/module-c2sim-client/#threading-model","title":"Threading Model","text":"<ul> <li> <p>WebSocket streams run in background threads managed by <code>OkHttpWebSocketManager</code></p> </li> <li> <p>Message processing runs in a dedicated thread pool (non-blocking message queue)</p> </li> <li> <p>Client methods are thread-safe - can be called from multiple threads</p> </li> <li> <p>Listeners are invoked on background threads - avoid blocking operations</p> </li> <li> <p>Virtual threads supported (Java 21+) for concurrent client simulations</p> </li> </ul>"},{"location":"c2sim-server/module-c2sim-client/#performance-considerations","title":"Performance Considerations","text":"<ul> <li> <p>Message Validation: XSD validation adds latency; consider disabling in production if validation is done server-side</p> </li> <li> <p>Message Decoding: Decoding XML to POJOs adds CPU overhead; enable only when needed</p> </li> <li> <p>Connection Pooling: OkHttpClient reuses connections - single client instance per system recommended</p> </li> <li> <p>Rate Limiting: Respect server rate limits when publishing messages rapidly</p> </li> </ul>"},{"location":"c2sim-server/module-c2sim-client/#troubleshooting","title":"Troubleshooting","text":""},{"location":"c2sim-server/module-c2sim-client/#connection-fails","title":"Connection Fails","text":"<pre><code>// Check event logs and enable debug logging\n// src/main/resources/logback.xml:\n// &lt;logger name=\"org.c2sim.client\" level=\"DEBUG\"/&gt;\n// Try async connection for automatic retry\nclient.connectAsync();\n</code></pre>"},{"location":"c2sim-server/module-c2sim-client/#messages-not-received","title":"Messages Not Received","text":"<pre><code>// Verify WebSocket stream is connected\nif (!client.hasStreamToSharedSession()) {\n    System.err.println(\"Stream not connected\");\n}\n// Check listener is registered\nclient.onReceivedMessage(msg -&gt; {\n    System.out.println(\"Got: \" + msg.kind());\n});\n</code></pre>"},{"location":"c2sim-server/module-c2sim-client/#validation-failures","title":"Validation Failures","text":"<pre><code>try {\n\n    client.publishC2SimDocument(xml);\n\n} catch (ValidationException e) {\n   // Print detailed validation errors\n    e.getValidationResult().getValidationErrors()\n       .forEach(error -&gt; System.err.println(error.getMessage()));\n\n}\n</code></pre>"},{"location":"c2sim-server/module-c2sim-client/#_1","title":"C2SIM Client","text":""},{"location":"c2sim-server/module-c2sim-land-operation-extension/","title":"Module C2SIM XML (LOX)","text":"<p>This module generates Java classes from the Lox/C2SIM XML Schema definitions (XSD).</p> <p>The schema files are located in:</p> <pre><code>src/main/resources/lox/xsd/2025\n</code></pre> <p>To convert these XSD files into strongly typed Java classes, the project uses the <code>jaxb2-maven-plugin</code>.</p> <p>Code generation can be triggered manually with:</p> <pre><code>mvn clean generate-sources\n</code></pre> <p>This approach guarantees that the Java model remains fully aligned with the authoritative XML schema definitions.</p>"},{"location":"c2sim-server/module-c2sim-land-operation-extension/#jakarta-jaxb","title":"Jakarta JAXB","text":"<p>Jakarta XML Binding (JAXB) is a framework for mapping XML schemas (XSD) to Java classes and vice versa.</p>"},{"location":"c2sim-server/module-c2sim-land-operation-extension/#helper-function","title":"Helper function","text":"<p>The module also providers extra helper functions like:</p> <ul> <li> <p>From <code>XML text</code> to <code>JAVA POJO</code></p> </li> <li> <p>From <code>JAVA POJO</code> to <code>XML text</code></p> </li> <li> <p>XSD validation of xml (xml text and <code>JAVA POJO</code>)</p> </li> <li> <p>Use builder pattern to create <code>C2SIM message</code></p> </li> <li> <p>Detection of <code>C2SIM Message kind</code> in xml text (without paring complete xml)</p> </li> <li> <p>Searching for objects in XML</p> </li> <li> <p>.....</p> </li> </ul>"},{"location":"c2sim-server/module-c2sim-land-operation-extension/#deserialize-serialize-c2sim-xml-message","title":"Deserialize / serialize  C2SIM XML message","text":"<p>The class <code>org.c2sim.lox.helpers.MessageTypeHelper</code> can be used to serialize and deserialize <code>C2SIM messages</code>.</p> <pre><code>MessageBodyType msgAsObject = MessageTypeHelper.readMessage(xmlText);\nString xmlAsText = MessageTypeHelper.writeMessageAsString(msg, true, true);\n</code></pre>"},{"location":"c2sim-server/module-c2sim-land-operation-extension/#validate-c2sim-xml-message","title":"Validate C2SIM XML message","text":"<p>The class <code>org.c2sim.lox.validation.LoxXsdValidator</code> can be used to validate <code>XML</code> against the <code>C2SIM XSD</code>. The class can return a simple <code>boolean</code> or an complete <code>error report</code> (with line numbers).</p> <pre><code>LoxXsdValidator.doValidation(xml).isValid()\n</code></pre>"},{"location":"c2sim-server/module-c2sim-land-operation-extension/#determine-c2sim-message-kind","title":"Determine C2SIM Message kind","text":"<p>The method <code>DetectMsgKind.determineMsgKindMeasured</code> can be used to get the <code>C2SIM Message kind</code> from an XML text. The method is optimized to not completely parse the XML message. </p> <pre><code>var result = DetectMsgKind.determineMsgKindMeasured(xml);\nThe result is an enumeration of the type `org.c2sim.lox.C2SimMsgKind`.\n</code></pre>"},{"location":"c2sim-server/module-c2sim-land-operation-extension/#_1","title":"C2SIM XML (LOX)","text":""},{"location":"c2sim-server/module-c2sim-server/","title":"Module C2SIM server","text":"<p>The <code>c2sim-server</code> module is the main application that provides REST and WebSocket endpoints for C2SIM message exchange. It uses Javalin 6.7.0 (not Spring) as the web framework with Google Guice for dependency injection.</p> <p>Location: <code>server/c2sim-server/</code></p> <p>Key Characteristics:</p> <ul> <li>OpenAPI-first REST API design</li> <li>WebSocket for real-time message streaming</li> <li>Prometheus metrics integration</li> <li>JWT-based authentication</li> <li>Swagger UI for API documentation</li> </ul>"},{"location":"c2sim-server/module-c2sim-server/#high-level-uml-view","title":"High level UML view","text":""},{"location":"c2sim-server/module-c2sim-server/#service-interfaces","title":"Service interfaces","text":"Service ConfigService Manages all configuration-related data C2SimSchemaService Validates C2SIM XSD schemas WebService Handles RESTful API operations WebSocketService Manages WebSocket communication C2SimService Oversees and coordinates C2SIM services"},{"location":"c2sim-server/module-c2sim-server/#management-of-shared-sessions","title":"Management of Shared Sessions","text":"<p>Management of <code>Shared session clients</code> in the <code>Shared session</code>.  To keep it clear: the UML diagram doesn't contain all methods and methods arguments are left out.</p> <pre><code>classDiagram\n\nclass SharedSessionManager {\n    +List&lt;SharedSession&gt; sessions\n    +getSharedSession()\n    +addSharedSession()\n    +removeSharedSession()\n}\n\nclass SharedSession {\n    +String sharedSessionName\n    +String schemaVersion\n    +C2SimStateMachine stateMachine \n    +List&lt;SharedSessionClient&gt; clients\n    +publishC2SimDoc()\n\n}\n\nclass SharedSessionClient {\n    +String clientId\n    +StreamingClient streamingClient\n    +resign()\n    +sendC2SimMessage()\n    +assignStreamingClient()\n    +handleOnClosedFromStreamingClient()\n}\n\nclass StreamingClient {\n    +onC2SimMessageReceived()\n    +onClosed()\n    +closeConnection()\n    +sendC2SimMessage()\n}\n\nSharedSessionManager \"1\" *-- \"0..*\" SharedSession : manages\nSharedSession \"1\" *-- \"0..*\" SharedSessionClient : contains\nSharedSessionClient \"1\" *-- \"0..1\" StreamingClient : owns</code></pre>"},{"location":"c2sim-server/module-c2sim-server/#application-entry-point","title":"Application Entry Point","text":""},{"location":"c2sim-server/module-c2sim-server/#launchserver","title":"LaunchServer","text":"<p>The application starts via the <code>LaunchServer</code> singleton:</p> <p>File: <code>server/c2sim-server/src/main/java/org/c2sim/LaunchServer.java</code></p> <pre><code>public class LaunchServer {\n    private final Injector injector;\n\n    public LaunchServer() throws IOException {\n        // 1. Create Guice injector\n        this.injector = Guice.createInjector(new DefaultModule());\n\n        // 2. Show license\n        showLicense();\n\n        // 3. Initialize default sessions\n        initializeServer();\n    }\n\n    public void start() {\n        // 4. Start Javalin web server\n        getWebService().serve();\n\n        // 5. Register WebSocket handlers\n        getWebSocketService().register();\n    }\n}\n</code></pre> <p>Startup sequence:</p> <ol> <li>Guice creates all singleton services</li> <li>Configuration loaded from environment variables</li> <li>Default shared sessions created from <code>server-config.json</code></li> <li>Javalin web server starts on configured port (default: 7777)</li> <li>WebSocket endpoints registered</li> </ol>"},{"location":"c2sim-server/module-c2sim-server/#main-method","title":"Main Method","text":"<p>File: <code>server/c2sim-server/src/main/java/org/c2sim/Program.java</code></p> <pre><code>public class Program {\n    public static void main(String[] args) {\n        LaunchServer.getSingleton().start();\n    }\n}\n</code></pre>"},{"location":"c2sim-server/module-c2sim-server/#dependency-injection-setup","title":"Dependency Injection Setup","text":""},{"location":"c2sim-server/module-c2sim-server/#defaultmodule","title":"DefaultModule","text":"<p>File: <code>server/c2sim-server/src/main/java/org/c2sim/server/DefaultModule.java</code></p> <p>All services are bound as singletons:</p> <pre><code>public class DefaultModule extends AbstractModule {\n    @Override\n    protected void configure() {\n        bind(ConfigService.class).to(DefaultConfigService.class).in(Scopes.SINGLETON);\n        bind(C2SimSchemaService.class).to(DefaultC2SimSchemaService.class).in(Scopes.SINGLETON);\n        bind(C2SimService.class).to(DefaultC2SimService.class).in(Scopes.SINGLETON);\n        bind(WebService.class).to(DefaultWebService.class).in(Scopes.SINGLETON);\n        bind(WebSocketService.class).to(DefaultWebSocketService.class).in(Scopes.SINGLETON);\n    }\n\n    @Provides\n    ObjectMapper provideObjectMapper() {\n        return C2SimObjectMapper.mapper;\n    }\n}\n</code></pre> <p>Convention: All implementations use constructor injection - no field injection.</p>"},{"location":"c2sim-server/module-c2sim-server/#restful-api-implementation","title":"RESTFul API implementation","text":"<p>The project uses an <code>OpenAPI-first REST API design</code> approach. In the module open-api-javalin-server-stub , a server stub is automatically generated from the C2SIM OpenAPI specification.</p> <p>in the package <code>org.c2sim.server.rest.impl</code> the RESTful server stub interfaces are implemented. </p> <p>The only exception is the C2SIM initialization operation.  This endpoint returns its response in XML format. Because the generated OpenAPI server stub does not support <code>application/xml</code> as a response type for this operation, the XML response is handled explicitly in: <code>DefaultWebService::handleSpecialCaseRestOperationInitialization</code>. </p>"},{"location":"c2sim-server/module-c2sim-server/#configuration-management","title":"Configuration management","text":"<p>File: <code>server/c2sim-server/src/main/java/org/c2sim/server/utils/Config.java</code></p> <p>The class <code>DefaultConfigService</code> implements a type-safe configuration. If the <code>ENV variable</code> is set, this value is used, else the the default value is returned. </p> <p>The method <code>Config::asTable</code> can be used to print all available config options (with ENV name) to the console.</p>"},{"location":"c2sim-server/module-c2sim-statemachine/","title":"Module C2SIM state machine","text":"<p>The C2SIM server uses a formal state machine to control and validate the lifecycle of shared sessions and related server operations.</p> <p>The state machine is implemented using the library:</p> <pre><code>com.github.stateless4j\n</code></pre> <p>Stateless4j is a lightweight finite state machine (FSM) library for the JVM. It provides a clear and structured way to define:</p> <ul> <li> <p>States</p> </li> <li> <p>Triggers (events)</p> </li> <li> <p>Transitions</p> </li> <li> <p>Entry and exit actions</p> </li> </ul> <p>Within the C2SIM server, the state machine is used to:</p> <ul> <li> <p>Enforce valid transitions between C2SIM operational states</p> </li> <li> <p>Prevent illegal state changes</p> </li> <li> <p>Guarantee protocol compliance</p> </li> <li> <p>Centralize lifecycle logic in a deterministic and testable manner</p> </li> </ul> <p>By modeling the C2SIM control flow explicitly as a state machine, the server behavior becomes:</p> <ul> <li> <p>Predictable</p> </li> <li> <p>Maintainable</p> </li> <li> <p>Easier to validate against the C2SIM standard</p> </li> </ul>"},{"location":"c2sim-server/module-c2sim-statemachine/#triggers","title":"Triggers","text":"<p>Transitions are driven by <code>Trigger</code> values, which correspond to C2SIM control messages such as:</p> <ul> <li> <p><code>SUBMIT_INITIALIZATION</code></p> </li> <li> <p><code>SHARE_SCENARIO</code></p> </li> <li> <p><code>START_SCENARIO</code></p> </li> <li> <p><code>STOP_SCENARIO</code></p> </li> <li> <p><code>PAUSE_SCENARIO</code></p> </li> <li> <p><code>RESUME_SCENARIO</code></p> </li> <li> <p><code>RESET_SCENARIO</code></p> </li> </ul>"},{"location":"c2sim-server/module-c2sim-statemachine/#entry-callbacks","title":"Entry Callbacks","text":"<p>The <code>StateMachineListener</code> interface provides entry hooks:</p> <ul> <li> <p><code>onEnterStateUninitialized</code></p> </li> <li> <p><code>onEnterStateInitializing</code></p> </li> <li> <p><code>onEnterStateInitialized</code></p> </li> <li> <p><code>onEnterStateRunning</code></p> </li> <li> <p><code>onEnterStatePaused</code></p> </li> </ul> <p>This allows the server to perform side effects during state transitions without coupling business logic directly to the state configuration.</p>"},{"location":"c2sim-server/module-c2sim-statemachine/#mermaid","title":"Mermaid","text":"<p>The method <code>C2SimStateMachine::toMermaid</code> can be used to generate an mermaid  notation to visualize the state machine.</p> <pre><code>stateDiagram-v2\n\n    [*] --&gt; UNINITIALIZED\n\n    UNINITIALIZED --&gt; INITIALIZING : SUBMIT_INITIALIZATION\n\n    INITIALIZING --&gt; INITIALIZED : SHARE_SCENARIO\\n[allSystemsAreInitialized()]\n    INITIALIZING --&gt; INITIALIZING : C2SIM_INITIALIZATION_BODY (ignored)\n    INITIALIZING --&gt; INITIALIZING : INITIALIZATION_COMPLETE (ignored)\n    INITIALIZING --&gt; INITIALIZING : OBJECT_INITIALIZATION (ignored)\n\n    INITIALIZED --&gt; RUNNING : START_SCENARIO\n    INITIALIZED --&gt; UNINITIALIZED : RESET_SCENARIO\n\n    RUNNING --&gt; PAUSED : PAUSE_SCENARIO\n    RUNNING --&gt; INITIALIZED : STOP_SCENARIO\n\n    PAUSED --&gt; RUNNING : RESUME_SCENARIO</code></pre>"},{"location":"c2sim-server/module-open-api-javalin-server-stub/","title":"Module open API javalin server stub","text":"<p>The project follows a schema-first (OpenAPI-first) REST API design approach. This module generates a .jar that is fully compliant with the C2SIM OpenAPI specification.</p> <p>Based on the C2SIM OpenAPI specification:</p> <pre><code>open-api-spec/c2sim-server-spec.yaml\n</code></pre> <p>a RESTful Javalin 6 server stub is generated automatically.</p>"},{"location":"c2sim-server/module-open-api-javalin-server-stub/#source-code-generation","title":"Source code Generation","text":"<p>The project uses theOpenAPI Tools code generator.</p> <p>The generation process is configured via the <code>openapi-generator-maven-plugin</code> in the pom.xml.</p> <p>Source code generation can be triggered manually with:</p> <pre><code>mvn openapi-generator:generate\n</code></pre> <p>During a normal Maven build, the generation step is executed automatically if it is bound to the generate-sources phase.</p>"},{"location":"c2sim-server/module-open-api-javalin-server-stub/#server-stub-implementation","title":"Server Stub Implementation","text":"<p>The generated server stub contains REST interface definitions only.</p> <p>The actual implementation of these interfaces is provided in the c2sim-server module</p>"},{"location":"c2sim-server/module-open-api-javalin-server-stub/#kotlin","title":"Kotlin","text":"<p>The OpenAPI generator produces Kotlin-based JVM code (compatible with Java). The generated classes can be used seamlessly within the Java-based server implementation.</p>"},{"location":"c2sim-server/quick-start/","title":"Quick start C2-SIM Server","text":""},{"location":"c2sim-server/quick-start/#prerequisites-running-locally","title":"Prerequisites (running locally)","text":""},{"location":"c2sim-server/quick-start/#required-development-software","title":"Required Development Software","text":"Tool Version Purpose Java JDK 21 Primary development language Maven 3.13.0+ Build system Git Latest Version control Docker Latest Containerization and testing IDE IntelliJ IDEA / VS Code / eclipse Development environment"},{"location":"c2sim-server/quick-start/#project-setup","title":"Project Setup","text":""},{"location":"c2sim-server/quick-start/#1-clone-repository","title":"1. Clone Repository","text":"<pre><code>git clone &lt;repository-url&gt;\n</code></pre>"},{"location":"c2sim-server/quick-start/#2-build-project-locally","title":"2. Build Project (locally)","text":"<pre><code>cd server\nmvn clean generate-sources package\n</code></pre> <p>Expected output:</p> <pre><code>[INFO] ------------------------------------------------------------------------\n[INFO] Reactor Summary:\n[INFO]\n[INFO] c2sim ............................................. SUCCESS [  0.5s]\n[INFO] c2sim-statemachine ................................ SUCCESS [  2.1s]\n[INFO] lox ............................................... SUCCESS [  3.2s]\n[INFO] open-api-javalin-server-stub ...................... SUCCESS [  1.8s]\n[INFO] c2sim-authorizer .................................. SUCCESS [  1.5s]\n[INFO] c2sim-server ...................................... SUCCESS [  4.3s]\n[INFO] c2sim-client ...................................... SUCCESS [  2.1s]\n[INFO] c2sim-client-app .................................. SUCCESS [  0.8s]\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD SUCCESS\n[INFO] ------------------------------------------------------------------------\n</code></pre>"},{"location":"c2sim-server/quick-start/#3-run-tests","title":"3. Run Tests","text":"<pre><code>mvn test\n</code></pre>"},{"location":"c2sim-server/quick-start/#4-code-style-check","title":"4. Code Style Check","text":"<pre><code>mvn checkstyle:check\n</code></pre>"},{"location":"c2sim-server/quick-start/#docker-build","title":"Docker build","text":"<p>Automated build in docker can de done trough the docker compose. </p> <pre><code>cd docker\ndocker compose build\n</code></pre> <p>To start c2sim server server</p> <pre><code>docker compose up -d\n</code></pre> <p>More information in docker section.</p>"},{"location":"c2sim-server/state-machine/","title":"C2SIM Server flow control","text":"<p>C2SIM clients can join a <code>shared session</code> on the C2SIM server. The C2SIM server can manage multiple <code>shared session</code> simultaneously. </p> <p>An orchestration is needed to keep all distributed <code>C2SIM clients</code> in a <code>shared session</code> in sync. For example: all <code>C2SIM clients</code> must start, stop and pause simultaneously.</p> <p>The C2SIM servers uses a state machine to manage the control flow. Each <code>shared session</code> has one <code>state</code>.  It is up to the <code>C2SIM clients</code> to keep their state machine in sync with the C2SIM server <code>state</code> (<code>C2SIM Message</code> notifications of state change).</p> <p>The following states are defined: </p> State Description UNINITIALIZED Server is starting INITIALIZING Waiting for scenario initialization INITIALIZED Scenario initialization completed, waiting for (C2SIM) systems RUNNING The scenario is running PAUSED The scenario is in paused state (no orders, reports allowed) <p>The <code>C2SIM clients</code> can send an <code>C2SIM Message</code> to trigger and event in the state machine. The C2SIM server validate the trigger, when it is a valid transition, the <code>state</code> is changed. A <code>C2SIM Message</code> is used to inform the <code>C2SIM clients</code> of the state change.</p> <p>The following <code>C2SIM Message</code> are used for flow control:</p> <ul> <li><code>SubmitInitialization</code></li> <li> <p><code>InitializationComplete</code> (optional)</p> </li> <li> <p><code>ShareScenario</code></p> </li> <li> <p><code>StartScenario</code></p> </li> <li> <p><code>PauseScenario</code></p> </li> <li> <p><code>ResumeScenario</code></p> </li> <li> <p><code>StopScenario</code></p> </li> <li> <p><code>ResetScenario</code></p> </li> </ul> <p>The <code>C2SIMInitializationBody</code> is used to initialize scenario.</p> Direction C2SIM client =&gt; C2SIM server State transition trigger C2SIM server =&gt; C2SIM client State transition notification"},{"location":"c2sim-server/state-machine/#state-machine-diagram","title":"State machine diagram","text":""},{"location":"c2sim-server/unit-testing/","title":"C2SIM-server unit testing","text":""},{"location":"c2sim-server/unit-testing/#junit","title":"JUnit","text":"<p>The solution uses JUnit 5 (Jupiter) for unit testing.</p> <p>All unit tests are located in <code>src/test/java</code> within each module.</p> <p>\u26a0\ufe0f In IntelliJ IDE there was no support for JUnit 6, this is the reason for Junit 5.</p>"},{"location":"c2sim-server/unit-testing/#running-unit-tests","title":"Running Unit Tests","text":"<p>Unit testing is integrated into the standard Maven build process.</p> <p>Full Build (includes tests)</p> <p>The <code>unit testing</code> is integrated in the automatic build</p> <pre><code>mvn clean verify\n</code></pre> <p>Run Only Unit Tests:</p> <pre><code>mvn clean test\n</code></pre>"},{"location":"c2sim-server/unit-testing/#temporarily-disable-unit-tests","title":"Temporarily Disable Unit Tests","text":"<p>To skip unit tests during a build:</p> <pre><code>mvn clean verify -DskipTests\n</code></pre>"},{"location":"c2sim-server/unit-testing/#ci-integration","title":"CI Integration","text":"<p>Tests are automatically executed during:</p> <pre><code>mvn verify\n</code></pre> <p>CI will fail if:</p> <ul> <li>A test fails</li> <li>A test throws an exception</li> <li>The build fails</li> </ul>"},{"location":"c2sim-server/unit-testing/#mocking-dependency-injection","title":"Mocking &amp; Dependency Injection","text":"<p>The following frameworks are used for testing:</p> <ul> <li> <p>[Google Guice]((https://github.com/google/guice)  \u2013 Dependency Injection</p> </li> <li> <p>Mockito \u2013 Mocking framework</p> </li> </ul> <p>These frameworks help isolate components during unit testing.</p>"},{"location":"c2sim-server/unit-testing/#test-reports","title":"Test Reports","text":"<p>The test reports can be found in folder <code>&lt;module&gt;\\target\\surefire-reports</code></p>"},{"location":"c2sim-server/unit-testing/#code-coverage","title":"Code coverage","text":"<p>The project uses JaCoCo to measure unit test code coverage.  </p> <p>\u26a0\ufe0f Work in progress; the current unit test only checks functionality. Not all classes and method are unit tested. This results in a very low coverage score*</p> <p>The code coverage HTML test report can be found in <code>c2sim-server\\target\\site\\jacoco-aggregate</code>.</p>"},{"location":"code-style-and-quality/code-style-and-quality/","title":"Code Style &amp; Quality","text":"<p>The Google Java Format java code styling is applied to the code.</p>"},{"location":"code-style-and-quality/code-style-and-quality/#spotless-google-java-format","title":"Spotless \u2013 Google Java Format","text":"<p>Spotless Maven Plugin can be applied to configure source code according Google Java Style format. An alternative is spotify fmt maven plugin (less option to configure)</p> Maven cmd Description <code>mvn spotless:check</code> check formatting <code>mvn spotless:apply</code> apply formatting changes"},{"location":"code-style-and-quality/code-style-and-quality/#checkstyle-static-code-rules","title":"Checkstyle \u2013 Static Code Rules","text":"<p>We use Maven Checkstyle Plugin to enforce coding standards beyond formatting.</p> <ul> <li>checkstyle:checkstyle\u00a0is a reporting goal that performs Checkstyle analysis and generates a report on violations.</li> <li>checkstyle:checkstyle-aggregate\u00a0is a reporting goal that performs Checkstyle analysis and generates an aggregate HTML report on violations in a multi-module reactor build.</li> <li>checkstyle:check\u00a0is a goal that performs Checkstyle analysis and outputs violations or a count of violations to the console, potentially failing the build. It can also be configured to re-use an earlier analysis.</li> </ul>"},{"location":"code-style-and-quality/code-style-and-quality/#sonarqube-code-quality-coverage","title":"SonarQube \u2013 Code Quality &amp; Coverage","text":"<p>Tool to analyze source code, more information here</p>"},{"location":"code-style-and-quality/code-style-and-quality/#auto-format-in-ide","title":"Auto-format in IDE","text":"<p>IntelliJ IDEA:</p> <ol> <li>Settings \u2192 Editor \u2192 Code Style \u2192 Java</li> <li>Scheme \u2192 Import Scheme \u2192 Checkstyle Configuration</li> <li>Select <code>server/config/checkstyle/checkstyle.xml</code></li> </ol> <p>VS Code:</p> <ol> <li>Install \"Checkstyle for Java\" extension</li> <li>Configure: <code>\"java.checkstyle.configuration\": \"server/config/checkstyle/checkstyle.xml\"</code></li> </ol>"},{"location":"docker/docker-monitoring/","title":"Monitoring","text":""},{"location":"docker/docker-monitoring/#monitoring-with-docker-metrics","title":"Monitoring with docker (metrics)","text":"<p>The docker composition can also be used to test the <code>C2SIM server metrics</code>. Prometheus scrapes the metric collection endpoints and <code>grafana</code> can be used to visualize the metrics.</p>"},{"location":"docker/docker-monitoring/#prometheus-configuration","title":"Prometheus Configuration","text":"<p>File: <code>docker/prometheus/prometheus.yml</code></p> <pre><code>global:\n  scrape_interval: 15s\n\nscrape_configs:\n  - job_name: \"c2sim-server\"\n    static_configs:\n      - targets: [\"c2sim-server:7777\"]\n    metrics_path: \"/metrics\"\n</code></pre> <p>Metrics URL: http://localhost:9090</p> <p>Example queries:</p> <pre><code># HTTP request rate\nrate(http_server_requests_seconds_count[5m])\n\n# JVM memory usage\njvm_memory_used_bytes{area=\"heap\"}\n\n# Thread count\njvm_threads_live_threads\n</code></pre>"},{"location":"docker/docker-monitoring/#grafana-dashboard","title":"Grafana Dashboard","text":"<p>File: <code>docker/grafana/dashboards/c2sim-dashboard.json</code></p> <p>Pre-configured dashboard showing:</p> <ul> <li>HTTP request rate/duration</li> <li>JVM memory usage</li> <li>Thread count</li> <li>GC activity</li> <li>WebSocket connections</li> </ul>"},{"location":"docker/docker-monitoring/#health-checks","title":"Health Checks","text":""},{"location":"docker/docker-monitoring/#liveness-probe","title":"Liveness Probe","text":"<pre><code>curl http://localhost:7777/api/c2sim/session/list\n</code></pre> <p>Expected: HTTP 200 with JSON array</p>"},{"location":"docker/docker-monitoring/#readiness-probe","title":"Readiness Probe","text":"<pre><code>curl http://localhost:7777/metrics\n</code></pre> <p>Expected: HTTP 200 with Prometheus metrics</p>"},{"location":"docker/docker/","title":"Docker C2SIM development environment","text":"<p>The C2SIM Server is deployed using Docker Compose with supporting services (Keycloak, Prometheus, Grafana).  The docker compose can also be used to deploy the c2sim-server but also create a clean build from the source code. </p>"},{"location":"docker/docker/#docker-compose-architecture","title":"Docker Compose Architecture","text":"<pre><code>flowchart TB\n    subgraph Docker_Network[\"Docker Network\"]\n        C2SIM[\"C2SIM Server&lt;br/&gt;Port: 7777\"]\n        KC[\"Keycloak&lt;br/&gt;Port: 8080\"]\n        PROM[\"Prometheus&lt;br/&gt;Port: 9090\"]\n        GRAF[\"Grafana&lt;br/&gt;Port: 3000\"]\n\n        C2SIM --&gt; GRAF\n        KC --&gt; GRAF\n        PROM --&gt; GRAF\n    end</code></pre>"},{"location":"docker/docker/#quick-start","title":"Quick Start","text":""},{"location":"docker/docker/#build-and-run-all-services","title":"Build and Run All Services","text":"<pre><code>cd docker\n\n# Build from source code and run\ndocker compose up --build\n# Run docker image directly (in background)\ndocker compose up -d\n</code></pre> <p>Services started:</p> C2SIM Server http://localhost:7777 Keycloak http://localhost:8080 Identity provider, initialized with test client credentials to test the c2sim claims. Prometheus http://localhost:9090 Collection of metric data Grafana http://localhost:3000 (admin/admin) Visualization of metric data MkDocs Documentation http://localhost:7778 Access documentation from docker container <p>Note: keycloak, prometheus and grafana are meant for testing environments, not production</p>"},{"location":"docker/docker/#stop-services","title":"Stop Services","text":"<pre><code>docker-compose down\n</code></pre>"},{"location":"docker/docker/#clean-restart-remove-volumes","title":"Clean Restart (Remove volumes)","text":"<pre><code>docker-compose down -v\ndocker-compose up --build\n</code></pre> <p>Check logs:</p> <pre><code>docker-compose logs c2sim-server\n</code></pre>"},{"location":"licenses/THIRD-PARTY/","title":"\ud83d\udce6 Third-Party Dependencies","text":"<p>Generated on 2026-02-23</p> Group ID Artifact ID Version License(s) <code>aopalliance</code> aopalliance 1.0 Public Domain <code>ch.qos.logback</code> logback-classic 1.5.29 Eclipse Public License - v 2.0, GNU Lesser General Public License <code>ch.qos.logback</code> logback-core 1.5.29 Eclipse Public License - v 2.0, GNU Lesser General Public License <code>com.aventrix.jnanoid</code> jnanoid 2.0.0 The MIT License <code>com.fasterxml.jackson.core</code> jackson-annotations 2.19.2 The Apache Software License, Version 2.0 <code>com.fasterxml.jackson.core</code> jackson-core 2.19.2 The Apache Software License, Version 2.0 <code>com.fasterxml.jackson.core</code> jackson-databind 2.17.2 The Apache Software License, Version 2.0 <code>com.fasterxml.jackson.core</code> jackson-databind 2.19.2 The Apache Software License, Version 2.0 <code>com.fasterxml.jackson.datatype</code> jackson-datatype-jsr310 2.19.2 The Apache Software License, Version 2.0 <code>com.fasterxml.jackson.module</code> jackson-module-kotlin 2.17.2 The Apache Software License, Version 2.0 <code>com.fasterxml.jackson.module</code> jackson-module-kotlin 2.19.2 The Apache Software License, Version 2.0 <code>com.github.stateless4j</code> stateless4j 2.6.0 The Apache Software License, Version 2.0 <code>com.github.stephenc.jcip</code> jcip-annotations 1.0-1 Apache License, Version 2.0 <code>com.google.code.findbugs</code> jsr305 3.0.2 The Apache Software License, Version 2.0 <code>com.google.code.gson</code> gson 2.10.1 Apache-2.0 <code>com.google.code.gson</code> gson 2.11.0 Apache-2.0 <code>com.google.errorprone</code> error_prone_annotations 2.27.0 Apache 2.0 <code>com.google.errorprone</code> error_prone_annotations 2.7.1 Apache 2.0 <code>com.google.guava</code> failureaccess 1.0.1 The Apache Software License, Version 2.0 <code>com.google.guava</code> guava 31.0.1-jre Apache License, Version 2.0 <code>com.google.guava</code> listenablefuture 9999.0-empty-to-avoid-conflict-with-guava The Apache Software License, Version 2.0 <code>com.google.inject</code> guice 7.0.0 The Apache Software License, Version 2.0 <code>com.google.j2objc</code> j2objc-annotations 1.3 The Apache Software License, Version 2.0 <code>com.nimbusds</code> content-type 2.3 The Apache Software License, Version 2.0 <code>com.nimbusds</code> lang-tag 1.7 The Apache Software License, Version 2.0 <code>com.nimbusds</code> nimbus-jose-jwt 10.5 The Apache Software License, Version 2.0 <code>com.nimbusds</code> nimbus-jose-jwt 10.6 The Apache Software License, Version 2.0 <code>com.nimbusds</code> oauth2-oidc-sdk 11.33 Apache License, version 2.0 <code>com.squareup.okhttp3</code> logging-interceptor 4.12.0 The Apache Software License, Version 2.0 <code>com.squareup.okhttp3</code> okhttp 4.12.0 The Apache Software License, Version 2.0 <code>com.squareup.okio</code> okio 3.6.0 The Apache Software License, Version 2.0 <code>com.squareup.okio</code> okio-jvm 3.6.0 The Apache Software License, Version 2.0 <code>com.sun.istack</code> istack-commons-runtime 4.1.2 Eclipse Distribution License - v 1.0 <code>io.gsonfire</code> gson-fire 1.8.5 Apache-2.0 <code>io.javalin</code> javalin 6.7.0 The Apache Software License, Version 2.0 <code>io.javalin</code> javalin-micrometer 6.7.0 The Apache Software License, Version 2.0 <code>io.javalin.community.openapi</code> javalin-openapi-plugin 6.7.0-2 The Apache License, Version 2.0 <code>io.javalin.community.openapi</code> javalin-swagger-plugin 6.7.0-2 The Apache License, Version 2.0 <code>io.javalin.community.openapi</code> openapi-specification 6.7.0-2 The Apache License, Version 2.0 <code>io.micrometer</code> micrometer-commons 1.14.5 The Apache Software License, Version 2.0 <code>io.micrometer</code> micrometer-core 1.14.5 The Apache Software License, Version 2.0 <code>io.micrometer</code> micrometer-jetty11 1.14.5 The Apache Software License, Version 2.0 <code>io.micrometer</code> micrometer-observation 1.14.5 The Apache Software License, Version 2.0 <code>io.micrometer</code> micrometer-registry-prometheus 1.14.12 The Apache Software License, Version 2.0 <code>io.prometheus</code> prometheus-metrics-config 1.3.10 The Apache Software License, Version 2.0 <code>io.prometheus</code> prometheus-metrics-core 1.3.10 The Apache Software License, Version 2.0 <code>io.prometheus</code> prometheus-metrics-exposition-formats 1.3.10 The Apache Software License, Version 2.0 <code>io.prometheus</code> prometheus-metrics-exposition-textformats 1.3.10 The Apache Software License, Version 2.0 <code>io.prometheus</code> prometheus-metrics-model 1.3.10 The Apache Software License, Version 2.0 <code>io.prometheus</code> prometheus-metrics-tracer-common 1.3.10 The Apache Software License, Version 2.0 <code>jakarta.activation</code> jakarta.activation-api 2.1.4 EDL 1.0 <code>jakarta.annotation</code> jakarta.annotation-api 2.1.1 EPL 2.0, GPL2 w/ CPE <code>jakarta.inject</code> jakarta.inject-api 2.0.1 The Apache Software License, Version 2.0 <code>jakarta.validation</code> jakarta.validation-api 3.1.1 Apache License 2.0 <code>jakarta.xml.bind</code> jakarta.xml.bind-api 4.0.5 Eclipse Distribution License - v 1.0 <code>joda-time</code> joda-time 2.12.7 Apache License, Version 2.0 <code>net.minidev</code> accessors-smart 2.5.2 The Apache Software License, Version 2.0 <code>net.minidev</code> json-smart 2.5.2 The Apache Software License, Version 2.0 <code>org.bitbucket.b_c</code> jose4j 0.9.6 The Apache Software License, Version 2.0 <code>org.c2sim</code> c2sim-authorizer 1.0.2-federates The Apache Software License, Version 2.0 <code>org.c2sim</code> c2sim-client 1.0.2-federates The Apache Software License, Version 2.0 <code>org.c2sim</code> c2sim-statemachine 1.0.2-federates The Apache Software License, Version 2.0 <code>org.c2sim</code> lox 1.0.2-federates The Apache Software License, Version 2.0 <code>org.c2sim</code> open-api-javalin-server-stub 1.0.2-federates The Apache Software License, Version 2.0 <code>org.checkerframework</code> checker-qual 3.12.0 The MIT License <code>org.eclipse.angus</code> angus-activation 2.0.2 EDL 1.0 <code>org.eclipse.jetty</code> jetty-http 11.0.25 Apache Software License - Version 2.0, Eclipse Public License - Version 2.0 <code>org.eclipse.jetty</code> jetty-io 11.0.25 Apache Software License - Version 2.0, Eclipse Public License - Version 2.0 <code>org.eclipse.jetty</code> jetty-security 11.0.25 Apache Software License - Version 2.0, Eclipse Public License - Version 2.0 <code>org.eclipse.jetty</code> jetty-server 11.0.25 Apache Software License - Version 2.0, Eclipse Public License - Version 2.0 <code>org.eclipse.jetty</code> jetty-servlet 11.0.25 Apache Software License - Version 2.0, Eclipse Public License - Version 2.0 <code>org.eclipse.jetty</code> jetty-util 11.0.25 Apache Software License - Version 2.0, Eclipse Public License - Version 2.0 <code>org.eclipse.jetty</code> jetty-webapp 11.0.25 Apache Software License - Version 2.0, Eclipse Public License - Version 2.0 <code>org.eclipse.jetty</code> jetty-xml 11.0.25 Apache Software License - Version 2.0, Eclipse Public License - Version 2.0 <code>org.eclipse.jetty.toolchain</code> jetty-jakarta-servlet-api 5.0.2 Apache Software License - Version 2.0, Eclipse Public License - Version 1.0 <code>org.eclipse.jetty.websocket</code> websocket-core-common 11.0.25 Apache Software License - Version 2.0, Eclipse Public License - Version 2.0 <code>org.eclipse.jetty.websocket</code> websocket-core-server 11.0.25 Apache Software License - Version 2.0, Eclipse Public License - Version 2.0 <code>org.eclipse.jetty.websocket</code> websocket-jetty-api 11.0.25 Apache Software License - Version 2.0, Eclipse Public License - Version 2.0 <code>org.eclipse.jetty.websocket</code> websocket-jetty-common 11.0.25 Apache Software License - Version 2.0, Eclipse Public License - Version 2.0 <code>org.eclipse.jetty.websocket</code> websocket-jetty-server 11.0.25 Apache Software License - Version 2.0, Eclipse Public License - Version 2.0 <code>org.eclipse.jetty.websocket</code> websocket-servlet 11.0.25 Apache Software License - Version 2.0, Eclipse Public License - Version 2.0 <code>org.glassfish.jaxb</code> jaxb-core 4.0.5 Eclipse Distribution License - v 1.0 <code>org.glassfish.jaxb</code> jaxb-runtime 4.0.5 Eclipse Distribution License - v 1.0 <code>org.glassfish.jaxb</code> txw2 4.0.5 Eclipse Distribution License - v 1.0 <code>org.hdrhistogram</code> HdrHistogram 2.2.2 BSD-2-Clause, Public Domain, per Creative Commons CC0 <code>org.jetbrains</code> annotations 13.0 The Apache Software License, Version 2.0 <code>org.jetbrains.kotlin</code> kotlin-reflect 2.0.20 The Apache License, Version 2.0 <code>org.jetbrains.kotlin</code> kotlin-stdlib 2.0.20 The Apache License, Version 2.0 <code>org.jetbrains.kotlin</code> kotlin-stdlib-common 2.0.20 The Apache License, Version 2.0 <code>org.jetbrains.kotlin</code> kotlin-stdlib-jdk7 2.0.20 The Apache License, Version 2.0 <code>org.jetbrains.kotlin</code> kotlin-stdlib-jdk8 2.0.20 The Apache License, Version 2.0 <code>org.latencyutils</code> LatencyUtils 2.0.3 Public Domain, per Creative Commons CC0 <code>org.ow2.asm</code> asm 9.7.1 BSD-3-Clause <code>org.slf4j</code> slf4j-api 2.0.16 MIT License <code>org.webjars</code> swagger-ui 5.17.14 Apache-2.0 <p><sub>Generated by license-maven-plugin 2.7.1</sub></p>"},{"location":"licenses/license-info/","title":"License info","text":"<p>The C2SIM software is released under license The Apache Software License, Version 2.0</p>"},{"location":"licenses/license-info/#third-party","title":"Third party","text":"<p>The License Maven Plugin is used to extract all license information out of the pom.xml (all modules). The list can be found here</p> <p>To re-generate the license list (in root folder):</p> <pre><code>mvn clean verify\n</code></pre>"},{"location":"metrics/c2sim-metrics/","title":"C2SIM Metrics","text":"<p>The C2SIM server exposes a <code>/metrics</code> endpoint that publishes runtime metrics using the OpenTelemetry standard.</p>"},{"location":"metrics/c2sim-metrics/#docker-test-environment","title":"Docker Test Environment","text":"<p>To support local development and metrics validation, the development Docker environment includes a complete observability stack.</p> <p>Included Services</p> System Description Prometheus Scrapes the <code>/metrics</code> endpoint and stores time-series data Grafana Open-source visualization platform for exploring and displaying metric history <p>This setup allows:</p> <ul> <li> <p>Verify that metrics are correctly exposed by the C2SIM server</p> </li> <li> <p>Inspect real-time metric values</p> </li> <li> <p>Analyze historical trends</p> </li> <li> <p>Build dashboards for performance monitoring</p> </li> </ul> <p>Prometheus periodically collects metrics from the C2SIM <code>/metrics</code> endpoint, while Grafana provides a user-friendly web interface for querying and visualizing the collected data.</p> <p>\u26a0 Development Use Only</p> <p>This Docker setup is intended for development and testing purposes only.</p>"},{"location":"openapi/c2sim-openapi-spec/","title":"C2SIM OpenAPI Specification","text":"<p>The <code>open-api-spec</code> directory contains the official OpenAPI definition for the C2SIM RESTful interface.</p> <p>This specification serves as the single source of truth for the API and is used to automatically generate both client and server stubs via standard OpenAPI code generation tools.</p>"},{"location":"openapi/c2sim-openapi-spec/#viewing-and-testing-the-specification","title":"Viewing and Testing the Specification","text":"<p>You can explore and validate the C2SIM OpenAPI specification in the following ways:</p> <ul> <li> <p>Online: Upload or paste the specification into the Swagger Editor   <code>https://editor.swagger.io/</code></p> </li> <li> <p>From a running C2SIM Server:   Open the built-in UI at: <code>/openapi-ui.html</code></p> </li> </ul> <p>This interactive interface allows you to:</p> <ul> <li> <p>Browse all available endpoints</p> </li> <li> <p>Inspect request/response schemas</p> </li> <li> <p>Execute test calls directly from the browser</p> </li> <li></li> <li> <p></p> </li> </ul>"},{"location":"openapi/manual-testing-with-openapi-ui/","title":"Manual testing","text":"<p>This procedure is only to show how the interaction with the <code>C2SIM server</code> works. This is only for demonstration, applications will do the same, only then programmatically.</p> <p>Open on the C2SIM-SERVER the path <code>openapi-ui.html</code>. This page can be used to simulate REST call.</p>"},{"location":"openapi/manual-testing-with-openapi-ui/#joining-the-c2sim-server","title":"Joining the C2SIM server","text":"<p>First we need to register at the C2SIM server, expand the <code>join</code> section:</p> <p></p> <p>Click <code>Try it out</code> button and fill in the information for the request:</p> <ul> <li> <p>clientId: <code>HSAWDSA</code> (or any combination of letters)</p> </li> <li> <p>sessionId: <code>default</code> (this shared session is always available on C2SIM-SERVER)</p> </li> <li> <p>systemName: <code>NLD_LOX</code> (or any system name)</p> </li> <li> <p>clientIdDisplayName: <code>NLD_CLIENT_LOX</code> (only used to make logfiles more readable)</p> </li> </ul> <p>Press the <code>Execute</code> button to make the REST request.</p> <p></p> <p>The status code <code>200</code> indicates that the C2SIM server processed the request. The response contains the status of the shared session <code>default</code>. Note that the C2SIMserver for shared session <code>default</code> is <code>UNINITIALIZED</code>. </p> <p></p> <p>The <code>C2SIM-SERVER</code> endpoint <code>status</code> can be used to check if the client is joined.</p> <p></p>"},{"location":"openapi/manual-testing-with-openapi-ui/#connecting-websocket-client","title":"Connecting WebSocket client","text":"<p>In order to receive C2SIM XML notifications a WebSocket client can connect to the <code>C2SIM-SERVER</code>. To get the WebSocket URL endpoint, use the <code>stream-endpoints</code> in the <code>notifications</code> section:</p> <p> </p> <p>Any WebSocket client can be used, an easy way is to use a chrome browser extension. Search on  google for <code>chrome extensions websocket test client</code> and install the extension.</p> <p></p> <p>Note: The web browser doesn't support ping (keep alive), so if there is inactivity the WebSocket  connection will be automatically closed. Just reconnect! The <code>C2SIM-SERVER</code> will only send messages if the client ( <code>HSAWDS</code>) has joined and only messages send by other clients (won't receive messages the client self send).</p>"},{"location":"openapi/manual-testing-with-openapi-ui/#initialize-c2sim-server","title":"Initialize C2SIM-server","text":"<p>The <code>C2SIM-SERVER</code> starts in <code>UNINITIALIZED</code> state. In order to send 'orders' and 'reports' the <code>C2SIM-SERVER</code> must be in <code>RUNNING</code> state. </p> <ul> <li>C2SIM Message <code>SubmitInitialization</code> (<code>UNINITIALIZED</code> =&gt; <code>INITIALIZED</code>)</li> <li>C2SIM Message <code>C2SIMInitilization</code> (<code>INITIALIZING</code> =&gt; <code>INITIALIZING</code>)</li> <li>C2SIM Message <code>ShareScenario</code> (<code>INITIALIZING</code> =&gt; <code>INITIALIZED</code>)</li> <li>C2SIM Message <code>StartScenario</code> (<code>INITIALIZED</code> =&gt; <code>RUNNING</code>)</li> </ul> <p>Examples of these <code>XML</code> messages can be found the here. </p> <p>Sending the C2SIM Messages,  open the <code>publish</code> section: </p> <p></p> <p>After <code>Execute</code> the status code should be <code>200</code> , indicating success. The <code>trackingId</code> can be used to track the request in the <code>C2SIM-SERVER</code> (debugging).</p> <p></p> <p>If a message is published that is invalid (invalid XML, not allowed), an error status code <code>400</code> is returned (with an error message).</p> <p></p> <p>All messages should be send to the <code>C2SIM-SERVER</code> to bring it into <code>RUNNING</code> state.</p>"},{"location":"openapi/manual-testing-with-openapi-ui/#checking-shared-session-state","title":"Checking Shared Session State","text":"<p>Use the REST <code>info</code> call:</p> <p></p> <p>Or use the <code>C2SIM-SERERVER</code> URL<code>/status</code>: </p>"},{"location":"openapi/manual-testing-with-openapi-ui/#websocket-notifications","title":"WebSocket notifications","text":"<p>Because the client is publishing the C2SIM messages, it will not receive these messages over WebSocket. Create a second client with a new <code>clientId</code> (join with with procedure above) to receive the notifications.</p> <p></p>"},{"location":"security/keycloak-development-env/","title":"Keycloak Development Server","text":"<p>To test the C2SIM client in combination with an Identity Provider (IdP), a Keycloak server is included in the Docker Compose setup.</p> <p>On startup:</p> <ul> <li>Realm <code>c2sim</code> is created</li> <li> <p>Multiple client accounts are created automatically</p> </li> <li> <p>Each client is configured with different C2SIM claims</p> </li> </ul> <p>Note On restart, the keycloak database is cleared (not persistent)</p>"},{"location":"security/keycloak-development-env/#test-data-initialization","title":"Test Data Initialization","text":"<p>Each time the Keycloak server restarts:</p> <ol> <li> <p>An initialization script runs automatically (node.js application)</p> </li> <li> <p>The realm <code>c2sim</code> is created</p> </li> <li> <p>The <code>c2sim</code> scope (containing claims) is added</p> </li> <li> <p>Clients defined in:</p> </li> </ol> <p><code>docker/init/kc-admin-ts/src/clients.config.ts</code></p> <p>are created and configured.</p> <p>You can modify this file to adjust the required C2SIM claims per client.</p>"},{"location":"security/keycloak-development-env/#dynamic-client-credentials","title":"Dynamic Client Credentials","text":"<p>The file:</p> <p><code>docker/credentials/c2sim_client_info.json</code></p> <p>contains the generated client configuration. The <code>clientId</code> and <code>clientSecret</code> can be configured in the C2SIM client.</p> <p>\u26a0 Important:</p> <ul> <li> <p>The client secret is randomly generated</p> </li> <li> <p>It changes on every restart</p> </li> <li> <p>This is intentional for development security</p> </li> </ul> <p>Example of <code>c2sim_client_info.json</code> (depends on content of <code>clients.config.ts</code>)</p> <pre><code>[\n  {\n    \"clientId\": \"pep-client\",\n    \"clientSecret\": \"siJaOkqiwTlXPD7xsL4eWHD9blVhO4fI\",\n    \"c2simClaims\": {\n      \"fromSendingSystem\": \"C2SIM\",\n      \"messageType\": \"ORDER\",\n      \"securityClassificationCode\": \"UNCLASSIFIED\"\n    }\n  },\n  {\n    \"clientId\": \"c2sim-client\",\n    \"clientSecret\": \"RQOwgVBNzS3frhpLqoFatVJ2xTyPQBDV\",\n    \"c2simClaims\": {\n      \"fromSendingSystem\": \"C2SIM\",\n      \"messageType\": \"ORDER\",\n      \"securityClassificationCode\": \"UNCLASSIFIED\"\n    }\n  }\n]\n</code></pre>"},{"location":"security/keycloak-development-env/#import-realm-data-alternative-approach","title":"Import Realm Data (Alternative Approach)","text":"<p>Instead of using the TypeScript initialization script, you can import a realm file directly using the built-in Keycloak import feature.</p>"},{"location":"security/keycloak-development-env/#option-import-realm","title":"Option: <code>--import-realm</code>","text":"<p>Place your realm file at:</p> <p><code>/opt/keycloak/data/import/realm.json</code></p> <p>Start Keycloak with:</p> <p><code>start-dev --import-realm</code></p> <p>In Docker:</p> <p><code>quay.io/keycloak/keycloak:latest start-dev --import-realm</code></p> <p>This imports the realm configuration during startup.</p> <p>\u26a0 Notes:</p> <ul> <li> <p>The realm must not already exist</p> </li> <li> <p>Import runs only at startup</p> </li> <li> <p>Useful for static configurations</p> </li> <li> <p>Less flexible than dynamic initialization scripts</p> </li> </ul> <p>Example of client section in <code>realm.json</code> (realm settings =&gt; action =&gt; import partial):</p> <pre><code> {\n  \"realm\": \"c2sim\",\n  \"enabled\": true,\n\n  \"clients\": [\n    {\n      \"clientId\": \"c2sim-client-2\",\n      \"enabled\": true,\n      \"protocol\": \"openid-connect\",\n      \"publicClient\": false,\n      \"clientAuthenticatorType\": \"client-secret\",\n      \"secret\": \"CHANGE_ME_SECRET\",\n      \"serviceAccountsEnabled\": true,\n      \"standardFlowEnabled\": false,\n      \"implicitFlowEnabled\": false,\n      \"directAccessGrantsEnabled\": false,\n      \"bearerOnly\": false,\n      \"consentRequired\": false,\n      \"fullScopeAllowed\": false,\n      \"defaultClientScopes\": [\n        \"c2sim\"\n      ],\n      \"optionalClientScopes\": []\n    }\n  ],\n\n  \"users\": [\n    {\n      \"username\": \"service-account-c2sim-client-2\",\n      \"enabled\": true,\n      \"serviceAccountClientId\": \"c2sim-client-2\",\n      \"realmRoles\": [\n        \"default-roles-c2sim\"\n      ],\n      \"attributes\": {\n        \"securityClassificationCode\": [\"UNCLASSIFIED\"],\n        \"messageType\": [\"ORDER\"],\n        \"fromSendingSystem\": [\"C2SIM-SYSTEM-A\"],\n        \"communicativeActTypeCode\": [\"REQUEST\"],\n        \"replyToSystem\": [\"SYSTEM-B\"],\n        \"toReceivingSystem\": [\"SYSTEM-C\"]\n      }\n    }\n  ]\n}\n</code></pre>"},{"location":"security/keycloak-development-env/#initialization-script-vs-import-realm","title":"Initialization Script vs <code>--import-realm</code>","text":"TypeScript Initialization <code>--import-realm</code> Dynamic setup Static JSON import Dynamic secrets (generated) Uses predefined secrets Programmatic control Configuration-based Good for dev automation Good for simple setups"},{"location":"security/keycloak-development-env/#keycloak-web-interface","title":"Keycloak web interface","text":""},{"location":"security/keycloak-webinterface/","title":"Keycloak web interface","text":"<p>Once the <code>docker compose up</code> is completed, the keycloak server is available under `http://localhost:8080'. </p> <p>Open an web browser (that support showing unsecure web pages) and login with <code>admin</code>, <code>admin</code>.</p> <p> </p> <p>By default the <code>master</code> realm is shown, switch to the <code>c2sim</code> realm context.</p> <p></p> <p>In the <code>client scopes</code> section, the <code>c2sim</code> scope should be added, with all <code>c2sim claims</code>.</p> <p></p> <p>The <code>c2sim scope</code> is added to the <code>client scopes</code>:</p> <p></p> <p>In the <code>clients</code> section, all clients are visible.</p> <p></p>"},{"location":"security/openid/","title":"OpenID Connect (OIDC) Integration","text":"<p>This section describes how the C2SIM server integrates with OpenID Connect (OIDC) for authentication and authorization. Within this project the keycloak implementation is used as Identity Provider (IDP).</p> <p></p>"},{"location":"security/openid/#terminology","title":"Terminology","text":"<p>Authentication (Identity) - The process of verifying who is making the REST API call.</p> <p>Authorization (Permission) - The process of verifying what the authenticated service is allowed to do.</p>"},{"location":"security/openid/#oidc-client-credentials-flow","title":"OIDC Client Credentials Flow","text":"<p>The Client Credentials Flow is used for machine-to-machine (M2M) authentication, where no human user is involved.</p> <p>Use this flow when:</p> <ul> <li>The client is a backend service  </li> <li>No browser login or user interaction is required  </li> <li>The service needs an access token to call protected APIs  </li> <li>Authentication is performed using a client secret  </li> </ul>"},{"location":"security/openid/#recommended-client-configuration","title":"Recommended Client Configuration","text":"Setting Value Protocol OpenID Connect Client Type Confidential Client Authentication Client secret Service Accounts Enabled Yes Public Client No"},{"location":"security/openid/#obtaining-an-access-token-manually","title":"Obtaining an Access Token Manually","text":"<p>For testing purposes, the Client Credentials Flow can be executed using <code>curl</code> against the token endpoint (for example with Keycloak):</p> <pre><code>curl -X POST \"https://your-keycloak.com/realms/YOUR_REALM/protocol/openid-connect/token\" \\\n  -H \"Content-Type: application/x-www-form-urlencoded\" \\\n  -d \"grant_type=client_credentials\" \\\n  -d \"client_id=YOUR_CLIENT_ID\" \\\n  -d \"client_secret=YOUR_CLIENT_SECRET\" \\\n  -d \"scope=c2sim\"\n</code></pre> <p>For keycloak test server see example below. The  <code>client_id</code> and <code>client_secret</code> can be found in <code>c2sim-server\\docker\\credentials\\c2sim_client_info.json</code> (dynamic generated):</p> <pre><code>curl -X POST \"http://localhost:8080/realms/c2sim/protocol/openid-connect/token\" \\\n  -H \"Content-Type: application/x-www-form-urlencoded\" \\\n  -d \"grant_type=client_credentials\" \\\n  -d \"client_id=c2sim-client\" \\\n  -d \"client_secret=RQOwgVBNzS3frhpLqoFatVJ2xTyPQBDV\" \\\n  -d \"scope=c2sim\"\n</code></pre> <p>The response will contain a JWT access token.</p>"},{"location":"security/openid/#client-secret","title":"Client Secret","text":"<p>The client secret is a shared secret used by confidential clients to authenticate with the identity provider.</p> <p>\u26a0 Security Notice</p> <ul> <li>The client secret must never be exposed in frontend or browser-based applications.  </li> <li>It must only be stored securely on backend systems.  </li> </ul>"},{"location":"security/openid/#openid-configuration-discovery","title":"OpenID Configuration Discovery","text":"<p>The C2SIM client can the OpenID Connect Discovery mechanism instead of directly configuring the token endpoint.</p> <p>For Keycloak, the discovery endpoint has the following format:</p> <pre><code>http://&lt;hostname&gt;:&lt;port&gt;/realms/&lt;realm&gt;/.well-known/openid-configuration\n</code></pre> <p>Example:</p> <pre><code>http://localhost:8080/realms/c2sim/.well-known/openid-configuration\n</code></pre> <p>Some libraries will automatically add <code>/.well-known/openid-configuration</code> to the URL.</p> <p>The returned JSON document contains metadata including:</p> <pre><code>\"token_endpoint\": \"http://localhost:8080/realms/c2sim/protocol/openid-connect/token\"\n</code></pre> <p>The C2SIM client extracts the <code>token_endpoint</code> value automatically.</p>"},{"location":"security/openid/#c2sim-specific-claims","title":"C2SIM-Specific claims","text":"<p>The <code>c2sim</code> scope includes domain-specific claims required by the C2SIM server.</p> Claim Description communicativeActTypeCode Type of communicative act fromSendingSystem Originating system replyToSystem Reply destination system securityClassificationCode Security classification level toReceivingSystem Target receiving system messageType C2SIM message type systemMessageType System-level message type"},{"location":"security/openid/#c2sim-scope","title":"C2SIM Scope","text":"<p>The scope <code>c2sim</code> contains all claims related to C2SIM (see C2SIM specific claims)</p>"},{"location":"security/openid/#jwt-access-token","title":"JWT Access Token","text":"<p>The access token in the RESTful API call is a bearer token, also known as JSON Web Token (JWT).</p> <p>A JWT is Base64URL-encoded and consists of three parts separated by a dot (<code>.</code>):</p> <pre><code>HEADER.PAYLOAD.SIGNATURE\n</code></pre>"},{"location":"security/openid/#jwt-structure","title":"JWT Structure","text":"Part Description Header Metadata about the signing algorithm Payload Claims (token data) Signature Digital signature used for verification"},{"location":"security/openid/#example-decode-payload","title":"Example decode payload","text":"<pre><code>{\n  \"exp\": 1770833986,\n  \"iat\": 1770832186,\n  \"jti\": \"69783bc1-1f78-4c80-a91e-e9ba0c2f7508\",\n  \"iss\": \"http://localhost:8080/realms/c2sim\",\n  \"sub\": \"d14adf87-b882-4e99-aeaf-b2e6d0ae8a10\",\n  \"typ\": \"Bearer\",\n  \"azp\": \"c2sim-client\",\n  \"scope\": \"c2sim\",\n  \"securityClassificationCode\": \"UNCLASSIFIED\",\n  \"clientHost\": \"172.19.0.1\",\n  \"messageType\": \"ORDER\",\n  \"clientAddress\": \"172.19.0.1\",\n  \"fromSendingSystem\": \"C2SIM\",\n  \"client_id\": \"c2sim-client\"\n}\n</code></pre> <p>Important generic <code>claims</code> (not C2SIM specific)</p> typ The <code>Bearer</code>\u00a0means the <code>access token</code> can be used for REST header\u00a0 <code>Authorization: Bearer</code> exp Expiration time of the <code>access token</code> in epoch notation. aud Who the token is intended for (resource/server). The C2SIM server can demand a certain values here."},{"location":"security/openid/#using-the-jwt-in-rest-calls","title":"Using the JWT in REST Calls","text":"<p>Every authenticated REST request must include the <code>Authorization</code> header:</p> <pre><code>Authorization: Bearer &lt;JWT_ACCESS_TOKEN&gt;\n</code></pre> <p>Example:</p> <pre><code>GET /c2sim/api/messages HTTP/1.1\nHost: your-server\nAuthorization: Bearer eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9...\n</code></pre> <p>Without this header, the C2SIM server will reject the request.</p>"},{"location":"security/openid/#time-server-ntp","title":"Time server (NTP)","text":"<p>If the IDP provider (Keycloak) or any IDP consumer has an incorrect system time, a valid <code>access token</code> may be rejected as expired (\u201ctoken expired\u201d).</p> <p>To prevent this issue, all participating systems should synchronize their clocks using an <code>NTP server</code>, ensuring consistent and accurate time across the environment.</p>"},{"location":"security/openid/#token-expiration","title":"Token expiration","text":"<p>Each <code>access token</code> issued by the IDP includes its expiration time, which is defined by the IDP. The client is responsible for renewing the <code>access token</code> before it expires.</p> <p>For <code>CWIX2025</code>, the expiration time was configured to last for the entire duration of the exercise, meaning the token only needed to be obtained once. In commercial systems, however, expiration times are typically much shorter\u2014usually ranging from 1 to 30 minutes.</p>"},{"location":"security/openid/#secure-connection-tls","title":"Secure connection (TLS)","text":"<p>When using OIDC, all RESTful calls that include an <code>Authorization</code> header must be sent over TLS (HTTPS).</p> <p>If an unencrypted HTTP connection is used, the <code>access token</code> can be intercepted using a network monitoring tool (e.g., Wireshark). Because a bearer token grants access to whoever possesses it, an attacker who captures the token could reuse it until it expires.</p> <p>For convenience, some environments use unencrypted HTTP. However, this is insecure. TLS requires valid, trusted certificates, and self-signed certificates are generally not acceptable in production environments because they cannot be reliably validated by clients.</p>"}]}